/*
**  Apollo-Client-WS -- GraphQL WebSocket Network Link for Apollo Client
**  Copyright (c) 2017-2019 Dr. Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ApolloClientWS = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,_dereq_("apollo-utilities"),_dereq_("zen-observable-ts"),_dereq_("graphql/language/printer")):"function"==typeof define&&define.amd?define(["exports","apollo-utilities","zen-observable-ts","graphql/language/printer"],n):n((e.apolloLink=e.apolloLink||{},e.apolloLink.core={}),e.apollo.utilities,e.apolloLink.zenObservable,e.printer)}(this,function(e,n,t,r){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var o,i=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},function(e,n){function t(){this.constructor=e}o(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),u=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e};var a=function(e){function n(n,t){var r=e.call(this,n)||this;return r.link=t,r}return i(n,e),n}(Error);function f(e){return e.request.length<=1}function c(e){var n=!1;return new Promise(function(t,r){e.subscribe({next:function(e){n?console.warn("Promise Wrapper does not support multiple results from Observable"):(n=!0,t(e))},error:r})})}var s=c;function l(e,n){var t=u({},e);return Object.defineProperty(n,"setContext",{enumerable:!1,value:function(e){t=u({},t,"function"==typeof e?e(t):e)}}),Object.defineProperty(n,"getContext",{enumerable:!1,value:function(){return u({},t)}}),Object.defineProperty(n,"toKey",{enumerable:!1,value:function(){return function(e){return r.print(e.query)+"|"+JSON.stringify(e.variables)+"|"+e.operationName}(n)}}),n}var p=function(e,n){return n?n(e):t.of()},y=function(e){return"function"==typeof e?new w(e):e},m=function(){return new w(function(e,n){return t.of()})},v=function(e){return 0===e.length?m():e.map(y).reduce(function(e,n){return e.concat(n)})},b=function(e,n,r){void 0===r&&(r=new w(p));var o=y(n),i=y(r);return f(o)&&f(i)?new w(function(n){return e(n)?o.request(n)||t.of():i.request(n)||t.of()}):new w(function(n,r){return e(n)?o.request(n,r)||t.of():i.request(n,r)||t.of()})},q=function(e,n){var r=y(e);if(f(r))return console.warn(new a("You are calling concat on a terminating link, which will have no effect",r)),r;var o=y(n);return f(o)?new w(function(e){return r.request(e,function(e){return o.request(e)||t.of()})||t.of()}):new w(function(e,n){return r.request(e,function(e){return o.request(e,n)||t.of()})||t.of()})},w=function(){function e(e){e&&(this.request=e)}return e.prototype.split=function(n,t,r){return void 0===r&&(r=new e(p)),this.concat(b(n,t,r))},e.prototype.concat=function(e){return q(this,e)},e.prototype.request=function(e,n){throw new Error("request is not implemented")},e.empty=m,e.from=v,e.split=b,e.execute=h,e}();function h(e,r){return e.request(l(r.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?n.getOperationName(t.query):""),t}(function(e){for(var n=["query","operationName","variables","extensions","context"],t=0,r=Object.keys(e);t<r.length;t++){var o=r[t];if(n.indexOf(o)<0)throw new Error("illegal argument: "+o)}return e}(r))))||t.of()}e.Observable=t,e.createOperation=l,e.makePromise=s,e.toPromise=c,e.fromPromise=function(e){return new t(function(n){e.then(function(e){n.next(e),n.complete()}).catch(n.error.bind(n))})},e.fromError=function(e){return new t(function(n){n.error(e)})},e.empty=m,e.from=v,e.split=b,e.concat=q,e.ApolloLink=w,e.execute=h,Object.defineProperty(e,"__esModule",{value:!0})});
},{"apollo-utilities":2,"graphql/language/printer":10,"zen-observable-ts":15}],2:[function(_dereq_,module,exports){
(function (process){
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,_dereq_("fast-json-stable-stringify")):"function"==typeof define&&define.amd?define(["exports","fast-json-stable-stringify"],n):n((e.apollo=e.apollo||{},e.apollo.utilities={}),e.stringify)}(this,function(e,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var t=function(){return(t=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function r(e,n,t,i){if(function(e){return"IntValue"===e.kind}(t)||function(e){return"FloatValue"===e.kind}(t))e[n.value]=Number(t.value);else if(function(e){return"BooleanValue"===e.kind}(t)||function(e){return"StringValue"===e.kind}(t))e[n.value]=t.value;else if(function(e){return"ObjectValue"===e.kind}(t)){var o={};t.fields.map(function(e){return r(o,e.name,e.value,i)}),e[n.value]=o}else if(function(e){return"Variable"===e.kind}(t)){var a=(i||{})[t.name.value];e[n.value]=a}else if(function(e){return"ListValue"===e.kind}(t))e[n.value]=t.values.map(function(e){var t={};return r(t,n,e,i),t[n.value]});else if(function(e){return"EnumValue"===e.kind}(t))e[n.value]=t.value;else{if(!function(e){return"NullValue"===e.kind}(t))throw new Error('The inline argument "'+n.value+'" of kind "'+t.kind+'"is not supported. Use variables instead of inline arguments to overcome this limitation.');e[n.value]=null}}var i=["connection","include","skip","client","rest","export"];function o(e,t,r){if(r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){var o=r.connection.filter?r.connection.filter:[];o.sort();var a=t,u={};return o.forEach(function(e){u[e]=a[e]}),r.connection.key+"("+JSON.stringify(u)+")"}return r.connection.key}var c=e;if(t){var l=n(t);c+="("+l+")"}return r&&Object.keys(r).forEach(function(e){-1===i.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?c+="@"+e+"("+JSON.stringify(r[e])+")":c+="@"+e)}),c}function a(e,n){if(e.arguments&&e.arguments.length){var t={};return e.arguments.forEach(function(e){var i=e.name,o=e.value;return r(t,i,o,n)}),t}return null}function u(e){throw new Error("Variable nodes are not supported by valueFromNode")}function c(e){return e.selectionSet&&e.selectionSet.selections.length>0?[e].concat(e.selectionSet.selections.map(function(e){return[e].concat(c(e))}).reduce(function(e,n){return e.concat(n)},[])):[e]}function l(e){return e.definitions.filter(function(e){return e.selectionSet&&e.selectionSet.selections}).map(function(e){return c(e)}).reduce(function(e,n){return e.concat(n)},[]).filter(function(e){return e.directives&&e.directives.length>0}).map(function(e){return e.directives}).reduce(function(e,n){return e.concat(n)},[]).map(function(e){return e.name.value})}var f=function(){return(f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function s(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.forEach(function(n){null!=n&&Object.keys(n).forEach(function(t){e[t]=n[t]})}),e}function d(e){if("Document"!==e.kind)throw new Error('Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');var n=e.definitions.filter(function(e){return"FragmentDefinition"!==e.kind}).map(function(e){if("OperationDefinition"!==e.kind)throw new Error('Schema type definitions not allowed in queries. Found: "'+e.kind+'"');return e});if(n.length>1)throw new Error("Ambiguous GraphQL document: contains "+n.length+" operations")}function v(e){return d(e),e.definitions.filter(function(e){return"OperationDefinition"===e.kind})[0]}function m(e){var n=v(e);if(!n)throw new Error("GraphQL document is missing an operation");return n}function p(e){return e.definitions.filter(function(e){return"FragmentDefinition"===e.kind})}function g(e){void 0===e&&(e=[]);var n={};return e.forEach(function(e){n[e.name.value]=e}),n}function h(e){if(Array.isArray(e))return e.map(function(e){return h(e)});if(null!==e&&"object"==typeof e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=h(e[t]));return n}return e}var y={kind:"Field",name:{kind:"Name",value:"__typename"}};function k(e,n){return e.selectionSet.selections.filter(function(e){return!(e&&"FragmentSpread"===e.kind&&!k(n[e.name.value],n))}).length>0}function w(e){return function(n){return e.some(function(e){return!(!e.name||e.name!==n.name.value)||!(!e.test||!e.test(n))})}}function b(e,n){var t=h(n);return t.definitions.forEach(function(n){!function e(n,t){if(!t.selections)return t;var r=n.some(function(e){return e.remove});return t.selections=t.selections.map(function(e){if("Field"!==e.kind||!e||!e.directives)return e;var t,i=w(n);return e.directives=e.directives.filter(function(e){var n=!i(e);return t||n||!r||(t=!0),n}),t?null:e}).filter(function(e){return!!e}),t.selections.forEach(function(t){"Field"!==t.kind&&"InlineFragment"!==t.kind||!t.selectionSet||e(n,t.selectionSet)}),t}(e,n.selectionSet)}),k(m(t),g(p(t)))?t:null}var O={test:function(e){var n="connection"===e.name.value;return n&&(e.arguments&&e.arguments.some(function(e){return"key"===e.name.value})||console.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),n}};function D(e,n,t){if(void 0===t&&(t=!0),"Field"!==n.kind||!n)return!0;if(!n.directives)return!1;var r=w(e);return n.directives.filter(r).length>0||t&&function(e,n,t){return void 0===t&&(t=!0),!(!n||!n.selections)&&n.selections.filter(function(n){return D(e,n,t)}).length>0}(e,n.selectionSet,t)}function F(){return"undefined"!=typeof process&&process.env.NODE_ENV?process.env.NODE_ENV:"development"}function E(e){return F()===e}function S(){return!0===E("production")}function V(){return!0===E("development")}function j(){return!0===E("test")}var N=Object.create({});e.getDirectiveInfoFromField=function(e,n){if(e.directives&&e.directives.length){var t={};return e.directives.forEach(function(e){t[e.name.value]=a(e,n)}),t}return null},e.shouldInclude=function(e,n){if(void 0===n&&(n={}),!e.directives)return!0;var t=!0;return e.directives.forEach(function(e){if("skip"===e.name.value||"include"===e.name.value){var r=e.arguments||[],i=e.name.value;if(1!==r.length)throw new Error("Incorrect number of arguments for the @"+i+" directive.");var o=r[0];if(!o.name||"if"!==o.name.value)throw new Error("Invalid argument for the @"+i+" directive.");var a=r[0].value,u=!1;if(a&&"BooleanValue"===a.kind)u=a.value;else{if("Variable"!==a.kind)throw new Error("Argument for the @"+i+" directive must be a variable or a boolean value.");if(void 0===(u=n[a.name.value]))throw new Error("Invalid variable referenced in @"+i+" directive.")}"skip"===i&&(u=!u),u||(t=!1)}}),t},e.flattenSelections=c,e.getDirectiveNames=l,e.hasDirectives=function(e,n){return l(n).some(function(n){return e.indexOf(n)>-1})},e.getFragmentQueryDocument=function(e,n){var t=n,r=[];if(e.definitions.forEach(function(e){if("OperationDefinition"===e.kind)throw new Error("Found a "+e.operation+" operation"+(e.name?" named '"+e.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed.");"FragmentDefinition"===e.kind&&r.push(e)}),void 0===t){if(1!==r.length)throw new Error("Found "+r.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment.");t=r[0].name.value}return f({},e,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}].concat(e.definitions)})},e.getMutationDefinition=function(e){d(e);var n=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})[0];if(!n)throw new Error("Must contain a mutation definition.");return n},e.checkDocument=d,e.getOperationDefinition=v,e.getOperationDefinitionOrDie=m,e.getOperationName=function(e){return e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&e.name}).map(function(e){return e.name.value})[0]||null},e.getFragmentDefinitions=p,e.getQueryDefinition=function(e){var n=v(e);if(!n||"query"!==n.operation)throw new Error("Must contain a query definition.");return n},e.getFragmentDefinition=function(e){if("Document"!==e.kind)throw new Error('Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');if(e.definitions.length>1)throw new Error("Fragment must have exactly one definition.");var n=e.definitions[0];if("FragmentDefinition"!==n.kind)throw new Error("Must be a fragment definition.");return n},e.getMainDefinition=function(e){var n;d(e);for(var t=0,r=e.definitions;t<r.length;t++){var i=r[t];if("OperationDefinition"===i.kind){var o=i.operation;if("query"===o||"mutation"===o||"subscription"===o)return i}"FragmentDefinition"!==i.kind||n||(n=i)}if(n)return n;throw new Error("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.")},e.createFragmentMap=g,e.getDefaultValues=function(e){if(e&&e.variableDefinitions&&e.variableDefinitions.length){var n=e.variableDefinitions.filter(function(e){return e.defaultValue}).map(function(e){var n=e.variable,t=e.defaultValue,i={};return r(i,n.name,t),i});return s.apply(void 0,[{}].concat(n))}return{}},e.variablesInOperation=function(e){var n=new Set;if(e.variableDefinitions)for(var t=0,r=e.variableDefinitions;t<r.length;t++){var i=r[t];n.add(i.variable.name.value)}return n},e.removeDirectivesFromDocument=b,e.addTypenameToDocument=function(e){d(e);var n=h(e);return n.definitions.forEach(function(e){var n="OperationDefinition"===e.kind;!function e(n,t){void 0===t&&(t=!1),n.selections&&(t||n.selections.some(function(e){return"Field"===e.kind&&"__typename"===e.name.value})||n.selections.push(y),n.selections.forEach(function(n){"Field"===n.kind?0!==n.name.value.lastIndexOf("__",0)&&n.selectionSet&&e(n.selectionSet):"InlineFragment"===n.kind&&n.selectionSet&&e(n.selectionSet)}))}(e.selectionSet,n)}),n},e.removeConnectionDirectiveFromDocument=function(e){return d(e),b([O],e)},e.getDirectivesFromDocument=function(e,n,t){void 0===t&&(t=!1),d(n);var r=h(n);return r.definitions=r.definitions.map(function(n){return("OperationDefinition"===n.kind||"FragmentDefinition"===n.kind&&!t)&&n.selectionSet&&(n.selectionSet=function e(n,t){return t.selections=t.selections.filter(function(e){return D(n,e,!0)}).map(function(t){return D(n,t,!1)?t:("Field"!==t.kind&&"InlineFragment"!==t.kind||!t.selectionSet||(t.selectionSet=e(n,t.selectionSet)),t)}),t}(e,n.selectionSet)),n}),k(m(r),g(p(r)))?r:null},e.isScalarValue=function(e){return["StringValue","BooleanValue","EnumValue"].indexOf(e.kind)>-1},e.isNumberValue=function(e){return["IntValue","FloatValue"].indexOf(e.kind)>-1},e.valueToObjectRepresentation=r,e.storeKeyNameFromField=function(e,n){var t=null;e.directives&&(t={},e.directives.forEach(function(e){t[e.name.value]={},e.arguments&&e.arguments.forEach(function(i){var o=i.name,a=i.value;return r(t[e.name.value],o,a,n)})}));var i=null;return e.arguments&&e.arguments.length&&(i={},e.arguments.forEach(function(e){var t=e.name,o=e.value;return r(i,t,o,n)})),o(e.name.value,i,t)},e.getStoreKeyName=o,e.argumentsObjectFromField=a,e.resultKeyNameFromField=function(e){return e.alias?e.alias.value:e.name.value},e.isField=function(e){return"Field"===e.kind},e.isInlineFragment=function(e){return"InlineFragment"===e.kind},e.isIdValue=function(e){return e&&"id"===e.type},e.toIdValue=function(e,n){return void 0===n&&(n=!1),t({type:"id",generated:n},"string"==typeof e?{id:e,typename:void 0}:e)},e.isJsonValue=function(e){return null!=e&&"object"==typeof e&&"json"===e.type},e.valueFromNode=function e(n,t){switch(void 0===t&&(t=u),n.kind){case"Variable":return t(n);case"NullValue":return null;case"IntValue":return parseInt(n.value,10);case"FloatValue":return parseFloat(n.value);case"ListValue":return n.values.map(function(n){return e(n,t)});case"ObjectValue":for(var r={},i=0,o=n.fields;i<o.length;i++){var a=o[i];r[a.name.value]=e(a.value,t)}return r;default:return n.value}},e.assign=s,e.cloneDeep=h,e.getEnv=F,e.isEnv=E,e.isProduction=S,e.isDevelopment=V,e.isTest=j,e.tryFunctionOrLogError=function(e){try{return e()}catch(e){console.error&&console.error(e)}},e.graphQLResultHasError=function(e){return e.errors&&e.errors.length},e.isEqual=function e(n,t){if(n===t)return!0;if(n instanceof Date&&t instanceof Date)return n.getTime()===t.getTime();if(null!=n&&"object"==typeof n&&null!=t&&"object"==typeof t){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(!Object.prototype.hasOwnProperty.call(t,r))return!1;if(!e(n[r],t[r]))return!1}for(var r in t)if(!Object.prototype.hasOwnProperty.call(n,r))return!1;return!0}return!1},e.maybeDeepFreeze=function(e){return!V()&&!j()||"function"==typeof Symbol&&"string"==typeof Symbol("")?e:function e(n){return Object.freeze(n),Object.getOwnPropertyNames(n).forEach(function(t){null===n[t]||"object"!=typeof n[t]&&"function"!=typeof n[t]||Object.isFrozen(n[t])||e(n[t])}),n}(e)},e.warnOnceInDevelopment=function(e,n){if(void 0===n&&(n="warn"),!S()&&!N[e])switch(j()||(N[e]=!0),n){case"error":console.error(e);break;default:console.warn(e)}},e.stripSymbols=function(e){return JSON.parse(JSON.stringify(e))},Object.defineProperty(e,"__esModule",{value:!0})});
}).call(this,_dereq_('_process'))
},{"_process":13,"fast-json-stable-stringify":5}],3:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Ducky=e()}}(function(){return function(){return function e(t,r,n){function o(i,c){if(!r[i]){if(!t[i]){var s="function"==typeof _dereq_&&_dereq_;if(!c&&s)return s(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){return o(t[i][1][e]||e)},u,u.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof _dereq_&&_dereq_,i=0;i<n.length;i++)o(n[i]);return o}}()({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0;r.version={major:2,minor:7,micro:2,date:20191221}},{}],2:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.Token=void 0;var o=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.name="",this.text="",this.tokens=[],this.pos=0,this.len=0}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"setName",value:function(e){this.name=e}},{key:"setText",value:function(e){this.text=e}},{key:"addToken",value:function(e,t,r,n,o){this.tokens.push({b1:e,b2:t,e2:r,e1:n,symbol:o}),this.len++}},{key:"peek",value:function(e){if(void 0===e&&(e=0),e>=this.len)throw new Error("".concat(this.name,": parse error: not enough tokens"));return this.tokens[this.pos+e].symbol}},{key:"skip",value:function(e){if(void 0===e&&(e=1),e>this.len)throw new Error("".concat(this.name,": parse error: not enough tokens available to skip: ").concat(this.ctx()));this.pos+=e,this.len-=e}},{key:"consume",value:function(e){if(this.len<=0)throw new Error("".concat(this.name,": parse error: no more tokens available to consume: ").concat(this.ctx()));if(this.tokens[this.pos].symbol!==e)throw new Error("".concat(this.name,': parse error: expected token symbol "').concat(e,'": ').concat(this.ctx()));this.pos++,this.len--}},{key:"ctx",value:function(e){void 0===e&&(e=78);var t=this.tokens[this.pos],r="<"+this.text.substr(t.b2,t.e2-t.b2+1)+">";r=this.text.substr(t.b1,t.b2-t.b1)+r;var n=e-(r+=this.text.substr(t.e2+1,t.e1-t.e2)).length;if(n>0){var o,a;if(n=Math.floor(n/2),this.pos>0){var i=0;for(o=this.pos-1;o>=0&&(t=this.tokens[o],!((i+=(a=this.text.substr(t.b1,t.e1-t.b1+1)).length)>n));o--)r=a+r;o>0&&(r="[...]"+r)}if(this.len>1){var c=0;for(o=this.pos+1;o<this.pos+this.len&&(t=this.tokens[o],!((c+=(a=this.text.substr(t.b1,t.e1-t.b1+1)).length)>n));o++)r+=a;o<this.pos+this.len&&(r+="[...]")}}return r.replace(/\r/,"\\r").replace(/\n/,"\\n").replace(/\t/,"\\t")}}]),e}();r.Token=o},{}],3:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registry=void 0;var t={};r.registry=t;for(var n=["Object","Boolean","Number","String","Function","RegExp","Array","Date","Error","Set","Map","WeakMap","Promise","Proxy","Iterator"],o=0;o<n.length;o++)"function"==typeof e[n[o]]&&(t[n[o]]=e[n[o]])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unregister=r.register=r.registered=void 0;var n=e("./ducky-2-registry-1-data.js");r.register=function(e,t){if(2!==arguments.length)throw new Error("register: invalid number of arguments: ".concat(arguments.length," (exactly 2 expected)"));if("string"!=typeof e)throw new Error('register: invalid name argument: "'.concat(e,'" (string expected)'));if("function"!=typeof t)throw new Error('register: invalid type argument: "'.concat(t,'" (function object expected)'));if(void 0!==n.registry[e])throw new Error('register: type already registered under name: "'.concat(e,'"'));n.registry[e]=t};r.unregister=function(e){if(1!==arguments.length)throw new Error("unregister: invalid number of arguments: ".concat(arguments.length," (exactly 1 expected)"));if("string"!=typeof e)throw new Error('unregister: invalid name argument: "'.concat(e,'" (string expected)'));if(void 0===n.registry[e])throw new Error('unregister: no type registered under name: "'.concat(e,'"'));delete n.registry[e]};r.registered=function(e){if(1!==arguments.length)throw new Error("registered: invalid number of arguments: ".concat(arguments.length," (exactly 1 expected)"));if("string"!=typeof e)throw new Error('registered: invalid name argument: "'.concat(e,'" (string expected)'));return n.registry[e]}},{"./ducky-2-registry-1-data.js":3}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select_compile=void 0;r.select_compile=function(e){for(var t,r=[],n=0,o=e;""!==o;){if(null!==(t=o.match(/^\s*(?:\.)?\s*([a-zA-Z$0-9_][a-zA-Z$0-9_:-]*)/)))r.push(t[1]);else if(null!==(t=o.match(/^\s*\[\s*(\d+|\*{1,2})\s*\]/)))r.push(t[1]);else if(null!==(t=o.match(/^\s*\[\s*"((?:\\"|.)*?)"\s*\]/)))r.push(t[1].replace(/\\"/g,'"'));else{if(null===(t=o.match(/^\s*\[\s*'((?:\\'|.)*?)'\s*\]/))){if(null!==(t=o.match(/^\s+$/)))break;throw new Error("select: parse error: invalid character at: "+e.substr(0,n)+"<"+o.substr(0,1)+">"+o.substr(1))}r.push(t[1].replace(/\\'/g,"'"))}n+=t[0].length,o=o.substr(t[0].length)}return r}},{}],6:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.select_execute=void 0;r.select_execute=function(e,t){if(0===t.length){if(3===arguments.length)throw new Error("select: cannot set value on empty path");return e}for(var r=0;r<t.length-1;){if("object"!==n(e))throw new Error("select: cannot further dereference: no more intermediate objects in path");e=e[t[r++]]}if("object"!==n(e))throw new Error("select: cannot further dereference: no object at end of path");var o=e[t[r]];if(3===arguments.length){var a=arguments[2];void 0===a?e instanceof Array?e.splice(parseInt(t[r],10),1):delete e[t[r]]:e[t[r]]=a}return o}},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=void 0;var n=e("./ducky-3-select-1-compile.js"),o=e("./ducky-3-select-2-execute.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={},c=function(e,t,r){if(arguments.length<2)throw new Error("select: invalid number of arguments: ".concat(arguments.length," (minimum of 2 expected)"));if(arguments.length>3)throw new Error("select: invalid number of arguments: ".concat(arguments.length," (maximum of 3 expected)"));if("string"!=typeof t)throw new Error('select: invalid specification argument: "'.concat(t,'" (string expected)'));var a=i[t];return void 0===a&&(a=(0,n.select_compile)(t),i[t]=a),2===arguments.length?(0,o.select_execute)(e,a):(0,o.select_execute)(e,a,r)};r.select=c,c.compile=function(e){if(1!==arguments.length)throw new Error("select: invalid number of arguments: ".concat(arguments.length," (exactly 1 expected)"));if("string"!=typeof e)throw new Error('select: invalid specification argument: "'.concat(e,'" (string expected)'));return n.select_compile.apply(void 0,arguments)},c.execute=function(e,t){if(arguments.length<2)throw new Error("select: invalid number of arguments: ".concat(arguments.length," (minimum of 2 expected)"));if(arguments.length>3)throw new Error("select: invalid number of arguments: ".concat(arguments.length," (maximum of 3 expected)"));if(!("object"===a(t)&&t instanceof Array))throw new Error('select: invalid path argument: "'.concat(t,'" (array expected)'));return o.select_execute.apply(void 0,arguments)}},{"./ducky-3-select-1-compile.js":5,"./ducky-3-select-2-execute.js":6}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validate_tokenize=void 0;var n=e("./ducky-1-util.js");r.validate_tokenize=function(e){var t,r=new n.Token;r.setName("validate"),r.setText(e);for(var o=0;""!==e;){if(null===(t=e.match(/^(\s*)([^\\{}\[\]:,?*+()!|/\s]+|[\\{}\[\]:,?*+()!|/])(\s*)/)))throw new Error('validate: parse error: cannot further canonicalize: "'.concat(e,'"'));r.addToken(o,o+t[1].length,o+t[1].length+t[2].length-1,o+t[0].length-1,t[2]),e=e.substr(t[0].length),o+=t[0].length}return r.addToken(o,o,o,o,null),r}},{"./ducky-1-util.js":2}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validate_parse=void 0;var n={parse:function(e){if(e.len<=0)return null;var t=this.parse_spec(e);if(null!==e.peek())throw new Error('validate: parse error: unexpected token (expected end-of-string): "'.concat(e.ctx(),'"'));return t},parse_spec:function(e){if(e.len<=0)return null;var t,r=e.peek();if("!"===r)t=this.parse_not(e);else if("("===r)t=this.parse_group(e);else if("{"===r)t=this.parse_hash(e);else if("["===r)t=this.parse_array(e);else if("/"===r)t=this.parse_regexp(e);else if(r.match(/^(?:null|undefined|boolean|number|string|function|object)$/))t=this.parse_primary(e);else if("any"===r)t=this.parse_any(e);else{if(!r.match(/^[_a-zA-Z$][_a-zA-Z$0-9]*(?:\.[_a-zA-Z$][_a-zA-Z$0-9]*)*$/))throw new Error('validate: parse error: invalid token symbol: "'.concat(e.ctx(),'"'));t=this.parse_class(e)}return t},parse_not:function(e){e.consume("!");var t=this.parse_spec(e);return{type:"not",op:t}},parse_group:function(e){e.consume("(");for(var t=this.parse_spec(e);"|"===e.peek();)e.consume("|"),t={type:"or",op1:t,op2:this.parse_spec(e)};return e.consume(")"),t},parse_hash:function(e){e.consume("{");for(var t=[];"}"!==e.peek();){var r=this.parse_key(e),n=this.parse_arity(e,"?");e.consume(":");var o=this.parse_spec(e);if(t.push({type:"element",key:r,arity:n,element:o}),","!==e.peek())break;e.skip()}var a={type:"hash",elements:t};return e.consume("}"),a},parse_array:function(e){e.consume("[");for(var t=[];"]"!==e.peek();){var r=this.parse_spec(e),n=this.parse_arity(e,"?*+");if(t.push({type:"element",element:r,arity:n}),","!==e.peek())break;e.skip()}var o={type:"array",elements:t};return e.consume("]"),o},parse_regexp:function(e){e.consume("/");for(var t,r="";e.len>=1&&"/"!==e.peek(0);)e.len>=2&&"\\"===e.peek(0)&&"/"===e.peek(1)?(r+=e.peek(1),e.skip(2)):(r+=e.peek(0),e.skip(1));e.consume("/");try{t=new RegExp(r)}catch(e){throw new Error('validate: parse error: invalid regular expression "'.concat(r,'": ').concat(e.message))}return{type:"regexp",regexp:t}},parse_primary:function(e){var t=e.peek();if(!t.match(/^(?:null|undefined|boolean|number|string|function|object)$/))throw new Error('validate: parse error: invalid primary type "'.concat(t,'"'));return e.skip(),{type:"primary",name:t}},parse_any:function(e){var t=e.peek();if("any"!==t)throw new Error('validate: parse error: invalid any type "'.concat(t,'"'));return e.skip(),{type:"any"}},parse_class:function(e){var t=e.peek();if(!t.match(/^[_a-zA-Z$][_a-zA-Z$0-9]*(?:\.[_a-zA-Z$][_a-zA-Z$0-9]*)*$/))throw new Error('validate: parse error: invalid class type "'.concat(t,'"'));return e.skip(),{type:"class",name:t}},parse_arity:function(e,t){var r=[1,1];if(e.len>=5&&"{"===e.peek(0)&&e.peek(1).match(/^[0-9]+$/)&&","===e.peek(2)&&e.peek(3).match(/^(?:[0-9]+|oo)$/)&&"}"===e.peek(4))r=[parseInt(e.peek(1),10),"oo"===e.peek(3)?Number.MAX_VALUE:parseInt(e.peek(3),10)],e.skip(5);else if(e.len>=3&&"{"===e.peek(0)&&e.peek(1).match(/^[0-9]+$/)&&"}"===e.peek(2))r=[parseInt(e.peek(1),10),parseInt(e.peek(1),10)],e.skip(3);else if(e.len>=1&&1===e.peek().length&&t.indexOf(e.peek())>=0){switch(e.peek()){case"?":r=[0,1];break;case"*":r=[0,Number.MAX_VALUE];break;case"+":r=[1,Number.MAX_VALUE]}e.skip()}return r},parse_key:function(e){var t=e.peek();if(!t.match(/^(?:[_a-zA-Z$][_a-zA-Z$0-9]*|@)$/))throw new Error('validate: parse error: invalid key "'.concat(t,'"'));return e.skip(),t}};r.validate_parse=n},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validate_execute=void 0;var n=e("./ducky-2-registry-2-api.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=function(e,t){return""===e?"mismatch at root-level: ".concat(t):'mismatch at path "'.concat(e,'": ').concat(t)},c={exec_spec:function(e,t,r,n){var o=!1;if(null!==t)switch(t.type){case"not":o=this.exec_not(e,t,r,n);break;case"or":o=this.exec_or(e,t,r,n);break;case"hash":o=this.exec_hash(e,t,r,n);break;case"array":o=this.exec_array(e,t,r,n);break;case"regexp":o=this.exec_regexp(e,t,r,n);break;case"primary":o=this.exec_primary(e,t,r,n);break;case"class":o=this.exec_class(e,t,r,n);break;case"any":o=!0;break;default:throw new Error('validate: invalid validation AST: node has unknown type "'.concat(t.type,'"'))}return o},exec_not:function(e,t,r,n){var o=null!==n?[]:null,a=this.exec_spec(e,t.op,r,o);return(a=!a)||null===n||o.forEach(function(e){return n.push(e)}),a},exec_or:function(e,t,r,n){var o=a(null!==n?[[],[]]:[null,null],2),i=o[0],c=o[1],s=this.exec_spec(e,t.op1,r,i),l=this.exec_spec(e,t.op2,r,c),u=s||l;return u||null===n||(i.forEach(function(e){return n.push(e)}),c.forEach(function(e){return n.push(e)})),u},exec_hash:function(e,t,r,n){var a,c,s,l="object"===o(e)&&null!==e,u={};if(l||null===n){if(l){var p=!1;for(s in e)if(Object.hasOwnProperty.call(e,s)&&Object.propertyIsEnumerable.call(e,s)&&"constructor"!==s&&"prototype"!==s){p=!0;break}for(a=0;a<t.elements.length;a++)if(u[(c=t.elements[a]).key]=c.element,c.arity[0]>0&&("@"===c.key&&!p||"@"!==c.key&&void 0===e[c.key])){if(l=!1,null===n)break;"@"===c.key?n.push(i(r,"mandatory element under arbitrary key not found")):n.push(i(r,'mandatory element under key "'.concat(c.key,'" not found')))}}}else null===e?n.push('mismatch at path "'.concat(r,'": found "null", expected hash')):n.push('mismatch at path "'.concat(r,'": found type "').concat(o(e),'", expected hash'));if(l||null!==n){var f=""!==r?".":"";for(s in e)if(Object.hasOwnProperty.call(e,s)&&Object.propertyIsEnumerable.call(e,s)&&"constructor"!==s&&"prototype"!==s&&(void 0===u[s]&&void 0===u["@"]&&null!==n&&n.push(i(r,'element under key "'.concat(s,'" unexpected'))),!(void 0!==u[s]&&this.exec_spec(e[s],u[s],"".concat(r).concat(f).concat(s),n)||void 0!==u["@"]&&this.exec_spec(e[s],u["@"],"".concat(r).concat(f).concat(s),n)||(l=!1,null!==n))))break}return l},exec_array:function(e,t,r,n){var a,c,s="object"===o(e)&&e instanceof Array;if(s||null===n){if(s){var l=0,u=null;for(a=0;a<t.elements.length;a++){c=t.elements[a];var p=0;for(u=null!==n?[]:null;p<c.arity[1]&&l<e.length&&this.exec_spec(e[l],c.element,"".concat(r,"[").concat(l,"]"),u);)p++,l++;if(p<c.arity[0]){null!==n&&n.push(i("".concat(r,"[").concat(l,"]"),"found only ".concat(p," elements of array element type #").concat(a,", ")+"expected at least ".concat(c.arity[0]," elements"))),s=!1;break}}!s&&null!==u&&u.length>0?null!==n&&u.forEach(function(e){return n.push(e)}):l<e.length&&(null!==n&&n.push(i(r,"matched only ".concat(l," elements, ")+"but ".concat(e.length," elements found"))),s=!1)}}else n.push(i(r,'found type "'.concat(o(e),'", expected array')));return s},exec_regexp:function(e,t,r,n){var o=null!==e&&"function"==typeof e.toString&&t.regexp.test(e.toString());return o||null===n||n.push(i(r,"value failed to match regular expression ".concat(t.regexp.toString()))),o},exec_primary:function(e,t,r,n){var a="null"===t.name&&null===e||o(e)===t.name;return a||null===n||n.push(i(r,'found type "'.concat(o(e),'", expected primary type "').concat(t.name,'"'))),a},exec_class:function(e,t,r,a){var c=(0,n.registered)(t.name),s="object"===o(e)&&(Object.prototype.toString.call(e)==="[object "+t.name+"]"||"function"==typeof c&&e instanceof c);return s||null===a||a.push(i(r,'found type "'.concat(o(e),'", expected class type "').concat(t.name,'"'))),s}};r.validate_execute=c},{"./ducky-2-registry-2-api.js":4}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validate=void 0;var n=e("./ducky-4-validate-1-tokenize.js"),o=e("./ducky-4-validate-2-parse.js"),a=e("./ducky-4-validate-3-execute.js"),i={},c=function e(t,r,n){if(arguments.length<2)throw new Error("validate: invalid number of arguments: ".concat(arguments.length," (minimum of 2 expected)"));if(arguments.length>3)throw new Error("validate: invalid number of arguments: ".concat(arguments.length," (maximum of 3 expected)"));if("string"!=typeof r)throw new Error('validate: invalid specification argument: "'.concat(r,'" (string expected)'));var o=i[r];return void 0===o&&(o=e.compile(r),i[r]=o),e.execute(t,o,n)};r.validate=c,c.compile=function(e){if(1!==arguments.length)throw new Error("validate: invalid number of arguments: ".concat(arguments.length," (exactly 1 expected)"));if("string"!=typeof e)throw new Error('validate: invalid specification argument: "'.concat(e,'" (string expected)'));var t=(0,n.validate_tokenize)(e);return o.validate_parse.parse(t)},c.execute=function(e,t,r){if(arguments.length<2)throw new Error("validate: invalid number of arguments: ".concat(arguments.length," (minimum of 2 expected)"));if(arguments.length>3)throw new Error("validate: invalid number of arguments: ".concat(arguments.length," (maximum of 3 expected)"));return(arguments.length<3||void 0===r)&&(r=null),a.validate_execute.exec_spec(e,t,"",r)}},{"./ducky-4-validate-1-tokenize.js":8,"./ducky-4-validate-2-parse.js":9,"./ducky-4-validate-3-execute.js":10}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.params=void 0;var n=e("./ducky-4-validate-4-api.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(e,t,r,o,a){if(void 0!==o&&!(0,n.validate)(r,o))throw new Error("".concat(e,': parameter "').concat(t,'" has ')+"".concat(a," ").concat(JSON.stringify(r),', which does not validate against "').concat(o,'"'))};r.params=function(e,t,r){var n,i={};for(n in r)Object.hasOwnProperty.call(r,n)&&void 0!==r[n].def&&(void 0!==r[n].valid&&a(e,n,r[n].def,r[n].valid,"default value"),i[n]=r[n].def);if(function(e,t){var r=!1;if(1===e.length&&"object"===o(e[0]))for(var n in r=!0,e[0])Object.hasOwnProperty.call(e[0],n)||void 0===t[n]&&(r=!1);return r}(t,r)){for(n in t=t[0])if(Object.hasOwnProperty.call(t,n)){if(void 0===r[n])throw new Error("".concat(e,': unknown parameter "').concat(n,'"'));a(e,n,t[n],r[n].valid,"value"),i[n]=t[n]}for(n in r)if(Object.hasOwnProperty.call(r,n)&&void 0!==r[n].req&&r[n].req&&void 0===t[n])throw new Error("".concat(e,': required parameter "').concat(n,'" missing'))}else{var c=0,s=0,l={};for(n in r)Object.hasOwnProperty.call(r,n)&&void 0!==r[n].pos&&(l[r[n].pos]=n,"number"==typeof r[n].pos&&c++,void 0!==r[n].req&&r[n].req&&s++);if(t.length<s)throw new Error("".concat(e,": invalid number of arguments (at least ").concat(s," required)"));for(var u=0;u<c&&u<t.length;)a(e,l[u],t[u],r[l[u]].valid,"value"),i[l[u]]=t[u],u++;if(u<t.length){if(void 0===l["..."])throw new Error("".concat(e,": too many arguments provided"));for(var p=[];u<t.length;)p.push(t[u++]);a(e,l["..."],p,r[l["..."]].valid,"value"),i[l["..."]]=p}}return i}},{"./ducky-4-validate-4-api.js":11}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.options=void 0;var n=e("./ducky-3-select-3-api.js"),o=e("./ducky-4-validate-4-api.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.options=function(e,t){var r={},i=[];!function t(c){var s=(0,n.select)(e,c.join("."));if("object"!==a(s)||s instanceof Array||null===s){if(!("object"===a(s)&&s instanceof Array&&null!==s))throw new Error('options: invalid option specification at "'.concat(c,'" (expected object or array)'));if(s.length<=0||s.length>2)throw new Error('options: invalid option specification at "'.concat(c.join("."),'" ')+"(expected array of length 1 or 2)");if("string"!=typeof s[0])throw new Error('options: invalid option specification at "'.concat(c.join("."),'[0]" ')+"(expected string type)");for(var l=r,u=0;u<c.length-1;)"object"!==a(l[c[u]])&&(l[c[u]]={}),l=l[c[u]],u++;if(2===s.length){var p=[];if(!(0,o.validate)(s[1],s[0],p))throw new Error('options: invalid option specification at "'.concat(c.join("."),'" ')+"(validation does not match default value): ".concat(p.join("; ")));l[c[u]]=s[1]}else i.push(c.join("."))}else for(var f in s)Object.hasOwnProperty.call(s,f)&&t(c.concat(f))}([]);var c=!0;return Object.defineProperty(r,"merge",{configurable:!1,enumerable:!1,writable:!1,value:function(t){var r=this;if(c){c=!1;for(var s=0;s<i.length;s++)if(void 0===(0,n.select)(t,i[s]))throw new Error('options: value for required option "'.concat(i[s],'" missing'))}return function t(i,c){var s=(0,n.select)(e,i);if("object"!==a(s))throw new Error('options: value provided for unknown option "'.concat(i,'" (invalid path)'));if(s instanceof Array){var l=[];if(!(0,o.validate)(c,s[0],l))throw new Error('options: invalid value for option "'.concat(i,'": ').concat(l.join("; ")));(0,n.select)(r,i,c)}else for(var u in c)Object.hasOwnProperty.call(c,u)&&t(""===i?u:"".concat(i,".").concat(u),c[u])}("",t),this}}),"object"===a(t)&&null!==t&&r.merge(t),r}},{"./ducky-3-select-3-api.js":7,"./ducky-4-validate-4-api.js":11}],14:[function(e,t,r){"use strict";var n=e("./ducky-0-version.js"),o=e("./ducky-2-registry-2-api.js"),a=e("./ducky-3-select-3-api.js"),i=e("./ducky-4-validate-4-api.js"),c=e("./ducky-5-params.js"),s=e("./ducky-6-options.js");t.exports={version:n.version,register:o.register,unregister:o.unregister,select:a.select,validate:i.validate,params:c.params,options:s.options}},{"./ducky-0-version.js":1,"./ducky-2-registry-2-api.js":4,"./ducky-3-select-3-api.js":7,"./ducky-4-validate-4-api.js":11,"./ducky-5-params.js":12,"./ducky-6-options.js":13}]},{},[14])(14)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(_dereq_,module,exports){
"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function addListener(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new EE(n,r||e,i),s=prefix?prefix+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function clearEvent(e,t){0==--e._eventsCount?e._events=new Events:delete e._events[t]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)has.call(e,t)&&n.push(prefix?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},EventEmitter.prototype.listeners=function(e){var t=prefix?prefix+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},EventEmitter.prototype.listenerCount=function(e){var t=prefix?prefix+e:e,n=this._events[t];return n?n.fn?1:n.length:0},EventEmitter.prototype.emit=function(e,t,n,r,i,o){var s=prefix?prefix+e:e;if(!this._events[s])return!1;var f,c,v=this._events[s],a=arguments.length;if(v.fn){switch(v.once&&this.removeListener(e,v.fn,void 0,!0),a){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,t),!0;case 3:return v.fn.call(v.context,t,n),!0;case 4:return v.fn.call(v.context,t,n,r),!0;case 5:return v.fn.call(v.context,t,n,r,i),!0;case 6:return v.fn.call(v.context,t,n,r,i,o),!0}for(c=1,f=new Array(a-1);c<a;c++)f[c-1]=arguments[c];v.fn.apply(v.context,f)}else{var p,l=v.length;for(c=0;c<l;c++)switch(v[c].once&&this.removeListener(e,v[c].fn,void 0,!0),a){case 1:v[c].fn.call(v[c].context);break;case 2:v[c].fn.call(v[c].context,t);break;case 3:v[c].fn.call(v[c].context,t,n);break;case 4:v[c].fn.call(v[c].context,t,n,r);break;default:if(!f)for(p=1,f=new Array(a-1);p<a;p++)f[p-1]=arguments[p];v[c].fn.apply(v[c].context,f)}}return!0},EventEmitter.prototype.on=function(e,t,n){return addListener(this,e,t,n,!1)},EventEmitter.prototype.once=function(e,t,n){return addListener(this,e,t,n,!0)},EventEmitter.prototype.removeListener=function(e,t,n,r){var i=prefix?prefix+e:e;if(!this._events[i])return this;if(!t)return clearEvent(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||clearEvent(this,i);else{for(var s=0,f=[],c=o.length;s<c;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&f.push(o[s]);f.length?this._events[i]=1===f.length?f[0]:f:clearEvent(this,i)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=prefix?prefix+e:e,this._events[t]&&clearEvent(this,t)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,"undefined"!=typeof module&&(module.exports=EventEmitter);
},{}],5:[function(_dereq_,module,exports){
"use strict";module.exports=function(r,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var e,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(e=t.cmp,function(r){return function(t,n){var i={key:t,value:r[t]},u={key:n,value:r[n]};return e(i,u)}}),u=[];return function r(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var e,o;if(Array.isArray(t)){for(o="[",e=0;e<t.length;e++)e&&(o+=","),o+=r(t[e])||"null";return o+"]"}if(null===t)return"null";if(-1!==u.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var f=u.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(o="",e=0;e<c.length;e++){var l=c[e],y=r(t[l]);y&&(o&&(o+=","),o+=JSON.stringify(l)+":"+y)}return u.splice(f,1),"{"+o+"}"}}(r)};
},{}],6:[function(_dereq_,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).GraphQLQueryCompress=t()}}(function(){return function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){return i(e[s][1][t]||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}}()({1:[function(t,e,n){(function(r){!function(t){"object"==typeof n&&void 0!==e?e.exports=t():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).Tokenizr=t()}(function(){return function e(n,r,i){function o(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof t&&t;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[a]={exports:{}};n[a][0].call(h.exports,function(t){return o(n[a][1][t]||t)},h,h.exports,e,n,r,i)}return r[a].exports}for(var s="function"==typeof t&&t,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}(t,arguments,a(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var h=function(t,e){var n=t.length,r=e-20;r<0&&(r=0);var i=e+20;i>n&&(i=n);var o=function(t){return t.charCodeAt(0).toString(16).toUpperCase()},s=function(t,e,n){return t.substr(e,n).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+o(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+o(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+o(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+o(t)})};return{prologTrunc:r>0,prologText:s(t,r,e-r),tokenText:s(t,e,1),epilogText:s(t,e+1,i-(e+1)),epilogTrunc:i<n}},f=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;u(this,t),this.type=e,this.value=n,this.text=r,this.pos=i,this.line=o,this.column=s}return l(t,[{key:"toString",value:function(){return"<type: ".concat(this.type,", ")+"value: ".concat(JSON.stringify(this.value),", ")+"text: ".concat(JSON.stringify(this.text),", ")+"pos: ".concat(this.pos,", ")+"line: ".concat(this.line,", ")+"column: ".concat(this.column,">")}},{key:"isA",value:function(t,e){return t===this.type&&(2!==arguments.length||e===this.value)}}]),t}(),p=function(t){function e(t,n,r,o,s){var c;return u(this,e),(c=i(this,a(e).call(this,t))).name="ParsingError",c.message=t,c.pos=n,c.line=r,c.column=o,c.input=s,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,o(Error)),l(e,[{key:"toString",value:function(){for(var t=h(this.input,this.pos),e="line ".concat(this.line," (column ").concat(this.column,"): "),n="",r=0;r<e.length+t.prologText.length;r++)n+=" ";return"Parsing Error: "+this.message+"\n"+e+t.prologText+t.tokenText+t.epilogText+"\n"+n+"^"}}]),e}(),_=function(){function t(e){u(this,t),this._tokenizr=e,this._data={},this._repeat=!1,this._reject=!1,this._ignore=!1,this._match=null}return l(t,[{key:"data",value:function(t,e){var n=this._data[t];return 2===arguments.length&&(this._data[t]=e),n}},{key:"info",value:function(){return{line:this._tokenizr._line,column:this._tokenizr._column,pos:this._tokenizr._pos,len:this._match[0].length}}},{key:"push",value:function(){var t;return(t=this._tokenizr).push.apply(t,arguments),this}},{key:"pop",value:function(){var t;return(t=this._tokenizr).pop.apply(t,arguments)}},{key:"state",value:function(){var t,e;return arguments.length>0?((e=this._tokenizr).state.apply(e,arguments),this):(t=this._tokenizr).state.apply(t,arguments)}},{key:"tag",value:function(){var t;return(t=this._tokenizr).tag.apply(t,arguments),this}},{key:"tagged",value:function(){var t;return(t=this._tokenizr).tagged.apply(t,arguments)}},{key:"untag",value:function(){var t;return(t=this._tokenizr).untag.apply(t,arguments),this}},{key:"repeat",value:function(){return this._tokenizr._log("    REPEAT"),this._repeat=!0,this}},{key:"reject",value:function(){return this._tokenizr._log("    REJECT"),this._reject=!0,this}},{key:"ignore",value:function(){return this._tokenizr._log("    IGNORE"),this._ignore=!0,this}},{key:"accept",value:function(t,e){return arguments.length<2&&(e=this._match[0]),this._tokenizr._log("    ACCEPT: type: ".concat(t,", value: ")+"".concat(JSON.stringify(e)," (").concat(r(e),'), text: "').concat(this._match[0],'"')),this._tokenizr._pending.push(new f(t,e,this._match[0],this._tokenizr._pos,this._tokenizr._line,this._tokenizr._column)),this}},{key:"stop",value:function(){return this._tokenizr._stopped=!0,this}}]),t}(),g=function(){function t(){u(this,t),this._before=null,this._after=null,this._finish=null,this._rules=[],this._debug=!1,this.reset()}return l(t,[{key:"reset",value:function(){return this._input="",this._len=0,this._eof=!1,this._pos=0,this._line=1,this._column=1,this._state=["default"],this._tag={},this._transaction=[],this._pending=[],this._stopped=!1,this._ctx=new _(this),this}},{key:"error",value:function(t){return new p(t,this._pos,this._line,this._column,this._input)}},{key:"debug",value:function(t){return this._debug=t,this}},{key:"_log",value:function(t){this._debug&&console.log("tokenizr: ".concat(t))}},{key:"input",value:function(t){if("string"!=typeof t)throw new Error('parameter "input" not a String');return this.reset(),this._input=t,this._len=t.length,this}},{key:"push",value:function(t){if(1!==arguments.length)throw new Error("invalid number of arguments");if("string"!=typeof t)throw new Error('parameter "state" not a String');return this._log("    STATE (PUSH): "+"old: <".concat(this._state[this._state.length-1],">, ")+"new: <".concat(t,">")),this._state.push(t),this}},{key:"pop",value:function(){if(0!==arguments.length)throw new Error("invalid number of arguments");if(this._state.length<2)throw new Error("no more custom states to pop");return this._log("    STATE (POP): "+"old: <".concat(this._state[this._state.length-1],">, ")+"new: <".concat(this._state[this._state.length-2],">")),this._state.pop()}},{key:"state",value:function(t){if(1===arguments.length){if("string"!=typeof t)throw new Error('parameter "state" not a String');return this._log("    STATE (SET): "+"old: <".concat(this._state[this._state.length-1],">, ")+"new: <".concat(t,">")),this._state[this._state.length-1]=t,this}if(0===arguments.length)return this._state[this._state.length-1];throw new Error("invalid number of arguments")}},{key:"tag",value:function(t){if(1!==arguments.length)throw new Error("invalid number of arguments");if("string"!=typeof t)throw new Error('parameter "tag" not a String');return this._log("    TAG (ADD): ".concat(t)),this._tag[t]=!0,this}},{key:"tagged",value:function(t){if(1!==arguments.length)throw new Error("invalid number of arguments");if("string"!=typeof t)throw new Error('parameter "tag" not a String');return!0===this._tag[t]}},{key:"untag",value:function(t){if(1!==arguments.length)throw new Error("invalid number of arguments");if("string"!=typeof t)throw new Error('parameter "tag" not a String');return this._log("    TAG (DEL): ".concat(t)),delete this._tag[t],this}},{key:"before",value:function(t){return this._before=t,this}},{key:"after",value:function(t){return this._after=t,this}},{key:"finish",value:function(t){return this._finish=t,this}},{key:"rule",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown";if(2===arguments.length&&"function"==typeof e){var o=[t,e];e=o[0],n=o[1],t="*"}else if(3===arguments.length&&"function"==typeof e){var s=[t,e,n];e=s[0],n=s[1],i=s[2],t="*"}if("string"!=typeof t)throw new Error('parameter "state" not a String');if(!("object"===r(e)&&e instanceof RegExp))throw new Error('parameter "pattern" not a RegExp');if("function"!=typeof n)throw new Error('parameter "action" not a Function');if("string"!=typeof i)throw new Error('parameter "name" not a String');t=t.split(/\s*,\s*/g).map(function(t){var e=t.split(/\s+/g),n=e.filter(function(t){return null===t.match(/^#/)}),r=e.filter(function(t){return null!==t.match(/^#/)}).map(function(t){return t.replace(/^#/,"")});if(1!==n.length)throw new Error("exactly one state required");return{state:n[0],tags:r}});var a="g";try{"boolean"==typeof new RegExp("","y").sticky&&(a="y")}catch(t){}return"boolean"==typeof e.multiline&&e.multiline&&(a+="m"),"boolean"==typeof e.dotAll&&e.dotAll&&(a+="s"),"boolean"==typeof e.ignoreCase&&e.ignoreCase&&(a+="i"),"boolean"==typeof e.unicode&&e.unicode&&(a+="u"),e=new RegExp(e.source,a),this._log("rule: configure rule (state: ".concat(t,", pattern: ").concat(e.source,")")),this._rules.push({state:t,pattern:e,action:n,name:i}),this}},{key:"_progress",value:function(t,e){for(var n=this._line,r=this._column,i=this._input,o=t;o<e;o++){var s=i.charAt(o);"\r"===s?this._column=1:"\n"===s?(this._line++,this._column=1):"\t"===s?this._column+=8-this._column%8:this._column++}this._log("    PROGRESS: characters: ".concat(e-t,", ")+"from: <line ".concat(n,", column ").concat(r,">, ")+"to: <line ".concat(this._line,", column ").concat(this._column,">"))}},{key:"_tokenize",value:function(){var t=this,e=function(){t._eof||(null!==t._finish&&t._finish.call(t._ctx,t._ctx),t._eof=!0,t._pending.push(new f("EOF","","",t._pos,t._line,t._column)))};if(!(this._stopped||this._pos>=this._len)){for(var n=!0;n;){if(n=!1,this._debug){var r=h(this._input,this._pos),i=Object.keys(this._tag).map(function(t){return"#".concat(t)}).join(" ");this._log("INPUT: state: <".concat(this._state[this._state.length-1],">, tags: <").concat(i,">, text: ")+(r.prologTrunc?"...":'"')+"".concat(r.prologText,"<").concat(r.tokenText,">").concat(r.epilogText)+(r.epilogTrunc?"...":'"')+", at: <line ".concat(this._line,", column ").concat(this._column,">"))}for(var o=0;o<this._rules.length;o++){if(this._debug){var s=this._rules[o].state.map(function(t){var e=t.state;return t.tags.length>0&&(e+=" "+t.tags.map(function(t){return"#".concat(t)}).join(" ")),e}).join(", ");this._log("  RULE: state(s): <".concat(s,">, ")+"pattern: ".concat(this._rules[o].pattern.source))}var a=!1,u=this._rules[o].state.map(function(t){return t.state}),c=u.indexOf("*");if(c<0&&(c=u.indexOf(this._state[this._state.length-1])),c>=0){a=!0;var l=this._rules[o].state[c].tags;(l=l.filter(function(e){return!t._tag[e]})).length>0&&(a=!1)}if(a){this._rules[o].pattern.lastIndex=this._pos;var p=this._rules[o].pattern.exec(this._input);if(this._rules[o].pattern.lastIndex=this._pos,null!==(p=this._rules[o].pattern.exec(this._input))&&p.index===this._pos){if(this._debug&&this._log("    MATCHED: "+JSON.stringify(p)),this._ctx._match=p,this._ctx._repeat=!1,this._ctx._reject=!1,this._ctx._ignore=!1,null!==this._before&&this._before.call(this._ctx,this._ctx,p,this._rules[o]),this._rules[o].action.call(this._ctx,this._ctx,p),null!==this._after&&this._after.call(this._ctx,this._ctx,p,this._rules[o]),this._ctx._reject)continue;if(this._ctx._repeat){n=!0;break}if(this._ctx._ignore){if(this._progress(this._pos,this._rules[o].pattern.lastIndex),this._pos=this._rules[o].pattern.lastIndex,this._pos>=this._len)return void e();n=!0;break}if(this._pending.length>0)return this._progress(this._pos,this._rules[o].pattern.lastIndex),this._pos=this._rules[o].pattern.lastIndex,void(this._pos>=this._len&&e());throw new Error('action of pattern "'+this._rules[o].pattern.source+'" neither rejected nor accepted any token(s)')}}}}throw this.error("token not recognized")}e()}},{key:"token",value:function(){if(0===this._pending.length&&this._tokenize(),this._pending.length>0){var t=this._pending.shift();return this._transaction.length>0&&this._transaction[0].push(t),this._log("TOKEN: ".concat(t.toString())),t}return null}},{key:"tokens",value:function(){for(var t,e=[];null!==(t=this.token());)e.push(t);return e}},{key:"peek",value:function(t){void 0===t&&(t=0);for(var e=0;e<this._pending.length+t;e++)this._tokenize();if(t>=this._pending.length)throw new Error("not enough tokens available for peek operation");return this._log("PEEK: ".concat(this._pending[t].toString())),this._pending[t]}},{key:"skip",value:function(t){void 0===t&&(t=1);for(var e=0;e<this._pending.length+t;e++)this._tokenize();if(t>this._pending.length)throw new Error("not enough tokens available for skip operation");for(;t-- >0;)this.token();return this}},{key:"consume",value:function(t,e){for(var n=this,i=0;i<this._pending.length+1;i++)this._tokenize();if(0===this._pending.length)throw new Error("not enough tokens available for consume operation");var o=this.token();this._log("CONSUME: ".concat(o.toString()));var s=function(){throw new p("expected: <type: ".concat(t,", value: ").concat(JSON.stringify(e)," (").concat(r(e),")>, ")+"found: <type: ".concat(o.type,", value: ").concat(JSON.stringify(o.value)," (").concat(r(o.value),")>"),o.pos,o.line,o.column,n._input)};return 2!==arguments.length||o.isA(t,e)?o.isA(t)||s():s(JSON.stringify(e),r(e)),o}},{key:"begin",value:function(){return this._log("BEGIN: level ".concat(this._transaction.length)),this._transaction.unshift([]),this}},{key:"depth",value:function(){if(0===this._transaction.length)throw new Error("cannot determine depth -- no active transaction");return this._transaction[0].length}},{key:"commit",value:function(){if(0===this._transaction.length)throw new Error("cannot commit transaction -- no active transaction");return this._transaction.shift(),this._log("COMMIT: level ".concat(this._transaction.length)),this}},{key:"rollback",value:function(){if(0===this._transaction.length)throw new Error("cannot rollback transaction -- no active transaction");return this._pending=this._transaction[0].concat(this._pending),this._transaction.shift(),this._log("ROLLBACK: level ".concat(this._transaction.length)),this}},{key:"alternatives",value:function(){for(var t=null,e=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0;o<r.length;o++)try{this.begin(),t=r[o].call(this),this.commit();break}catch(t){this._log("EXCEPTION: ".concat(t.toString())),e.push({ex:t,depth:this.depth()}),this.rollback();continue}if(null===t&&e.length>0)throw(e=e.sort(function(t,e){return t.depth-e.depth}))[0].ex;return t}}]),t}();g.Token=f,g.ParsingError=p,g.ActionContext=_,e.exports=g},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r,i=(r=t("tokenizr"))&&r.__esModule?r:{default:r};e.exports=function(t){var e=new i.default;e.rule(/#[^\r\n]*(?=\r?\n)/,function(t,e){t.accept("comment")}),e.rule(/"(?:\\"|[^"])*"/,function(t,e){t.accept("string")}),e.rule(/$[a-zA-Z_][a-zA-Z0-9_]*/,function(t,e){t.accept("var")}),e.rule(/[a-zA-Z_][a-zA-Z0-9_]*/,function(t,e){t.accept("id")}),e.rule(/[+-]?[0-9]*\.?[0-9]+(?:[eE][+-]?[0-9]+)?/,function(t,e){t.accept("number")}),e.rule(/[ \t\r\n]+/,function(t,e){t.accept("ws"," ")}),e.rule(/[{}]/,function(t,e){t.accept("brace")}),e.rule(/[[\]]/,function(t,e){t.accept("bracket")}),e.rule(/[()]/,function(t,e){t.accept("parenthesis")}),e.rule(/,/,function(t,e){t.accept("comma")}),e.rule(/!/,function(t,e){t.accept("not")}),e.rule(/\.\.\./,function(t,e){t.accept("ellipsis")}),e.rule(/@/,function(t,e){t.accept("at")}),e.rule(/:/,function(t,e){t.accept("colon")}),e.rule(/./,function(t,e){t.accept("any")}),e.input(t),e.debug(!1);for(var n=e.tokens(),r="",o=/^(?:brace|bracket|parenthesis|comma|colon)$/,s=0;s<n.length;s++)("comment"===n[s].type||"ws"===n[s].type&&(s<n.length-1&&n[s+1].type.match(o)||s>0&&n[s-1].type.match(o)))&&(n.splice(s,1),s--);return n.forEach(function(t){r+=t.value}),r}},{tokenizr:1}]},{},[2])(2)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],7:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=inspect;var _nodejsCustomInspectSymbol=_interopRequireDefault(_dereq_("./nodejsCustomInspectSymbol"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var MAX_ARRAY_LENGTH=10,MAX_RECURSIVE_DEPTH=2;function inspect(t){return formatValue(t,[])}function formatValue(t,e){switch(_typeof(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return null===t?"null":formatObjectValue(t,e);default:return String(t)}}function formatObjectValue(t,e){if(-1!==e.indexOf(t))return"[Circular]";var r=[].concat(e,[t]),n=getCustomFn(t);if(void 0!==n){var o=n.call(t);if(o!==t)return"string"==typeof o?o:formatValue(o,r)}else if(Array.isArray(t))return formatArray(t,r);return formatObject(t,r)}function formatObject(t,e){var r=Object.keys(t);return 0===r.length?"{}":e.length>MAX_RECURSIVE_DEPTH?"["+getObjectTag(t)+"]":"{ "+r.map(function(r){return r+": "+formatValue(t[r],e)}).join(", ")+" }"}function formatArray(t,e){if(0===t.length)return"[]";if(e.length>MAX_RECURSIVE_DEPTH)return"[Array]";for(var r=Math.min(MAX_ARRAY_LENGTH,t.length),n=t.length-r,o=[],u=0;u<r;++u)o.push(formatValue(t[u],e));return 1===n?o.push("... 1 more item"):n>1&&o.push("... ".concat(n," more items")),"["+o.join(", ")+"]"}function getCustomFn(t){var e=t[String(_nodejsCustomInspectSymbol.default)];return"function"==typeof e?e:"function"==typeof t.inspect?t.inspect:void 0}function getObjectTag(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"==typeof t.constructor){var r=t.constructor.name;if("string"==typeof r&&""!==r)return r}return e}
},{"./nodejsCustomInspectSymbol":8}],8:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var nodejsCustomInspectSymbol="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0,_default=nodejsCustomInspectSymbol;exports.default=_default;
},{}],9:[function(_dereq_,module,exports){
"use strict";function dedentBlockStringValue(n){var t=n.split(/\r\n|[\n\r]/g),e=getBlockStringIndentation(t);if(0!==e)for(var r=1;r<t.length;r++)t[r]=t[r].slice(e);for(;t.length>0&&isBlank(t[0]);)t.shift();for(;t.length>0&&isBlank(t[t.length-1]);)t.pop();return t.join("\n")}function getBlockStringIndentation(n){for(var t=null,e=1;e<n.length;e++){var r=n[e],i=leadingWhitespace(r);if(i!==r.length&&((null===t||i<t)&&0===(t=i)))break}return null===t?0:t}function leadingWhitespace(n){for(var t=0;t<n.length&&(" "===n[t]||"\t"===n[t]);)t++;return t}function isBlank(n){return leadingWhitespace(n)===n.length}function printBlockString(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===n.indexOf("\n"),i=" "===n[0]||"\t"===n[0],l='"'===n[n.length-1],o=!r||l||e,g="";return!o||r&&i||(g+="\n"+t),g+=t?n.replace(/\n/g,"\n"+t):n,o&&(g+="\n"),'"""'+g.replace(/"""/g,'\\"""')+'"""'}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dedentBlockStringValue=dedentBlockStringValue,exports.getBlockStringIndentation=getBlockStringIndentation,exports.printBlockString=printBlockString;
},{}],10:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.print=print;var _visitor=_dereq_("./visitor"),_blockString=_dereq_("./blockString");function print(n){return(0,_visitor.visit)(n,{leave:printDocASTReducer})}var printDocASTReducer={Name:function(n){return n.value},Variable:function(n){return"$"+n.name},Document:function(n){return join(n.definitions,"\n\n")+"\n"},OperationDefinition:function(n){var e=n.operation,i=n.name,t=wrap("(",join(n.variableDefinitions,", "),")"),r=join(n.directives," "),o=n.selectionSet;return i||r||t||"query"!==e?join([e,join([i,t]),r,o]," "):o},VariableDefinition:function(n){var e=n.variable,i=n.type,t=n.defaultValue,r=n.directives;return e+": "+i+wrap(" = ",t)+wrap(" ",join(r," "))},SelectionSet:function(n){return block(n.selections)},Field:function(n){var e=n.alias,i=n.name,t=n.arguments,r=n.directives,o=n.selectionSet;return join([wrap("",e,": ")+i+wrap("(",join(t,", "),")"),join(r," "),o]," ")},Argument:function(n){return n.name+": "+n.value},FragmentSpread:function(n){return"..."+n.name+wrap(" ",join(n.directives," "))},InlineFragment:function(n){var e=n.typeCondition,i=n.directives,t=n.selectionSet;return join(["...",wrap("on ",e),join(i," "),t]," ")},FragmentDefinition:function(n){var e=n.name,i=n.typeCondition,t=n.variableDefinitions,r=n.directives,o=n.selectionSet;return"fragment ".concat(e).concat(wrap("(",join(t,", "),")")," ")+"on ".concat(i," ").concat(wrap("",join(r," ")," "))+o},IntValue:function(n){return n.value},FloatValue:function(n){return n.value},StringValue:function(n,e){var i=n.value;return n.block?(0,_blockString.printBlockString)(i,"description"===e?"":"  "):JSON.stringify(i)},BooleanValue:function(n){return n.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(n){return n.value},ListValue:function(n){return"["+join(n.values,", ")+"]"},ObjectValue:function(n){return"{"+join(n.fields,", ")+"}"},ObjectField:function(n){return n.name+": "+n.value},Directive:function(n){return"@"+n.name+wrap("(",join(n.arguments,", "),")")},NamedType:function(n){return n.name},ListType:function(n){return"["+n.type+"]"},NonNullType:function(n){return n.type+"!"},SchemaDefinition:function(n){var e=n.directives,i=n.operationTypes;return join(["schema",join(e," "),block(i)]," ")},OperationTypeDefinition:function(n){return n.operation+": "+n.type},ScalarTypeDefinition:addDescription(function(n){return join(["scalar",n.name,join(n.directives," ")]," ")}),ObjectTypeDefinition:addDescription(function(n){var e=n.name,i=n.interfaces,t=n.directives,r=n.fields;return join(["type",e,wrap("implements ",join(i," & ")),join(t," "),block(r)]," ")}),FieldDefinition:addDescription(function(n){var e=n.name,i=n.arguments,t=n.type,r=n.directives;return e+(hasMultilineItems(i)?wrap("(\n",indent(join(i,"\n")),"\n)"):wrap("(",join(i,", "),")"))+": "+t+wrap(" ",join(r," "))}),InputValueDefinition:addDescription(function(n){var e=n.name,i=n.type,t=n.defaultValue,r=n.directives;return join([e+": "+i,wrap("= ",t),join(r," ")]," ")}),InterfaceTypeDefinition:addDescription(function(n){var e=n.name,i=n.directives,t=n.fields;return join(["interface",e,join(i," "),block(t)]," ")}),UnionTypeDefinition:addDescription(function(n){var e=n.name,i=n.directives,t=n.types;return join(["union",e,join(i," "),t&&0!==t.length?"= "+join(t," | "):""]," ")}),EnumTypeDefinition:addDescription(function(n){var e=n.name,i=n.directives,t=n.values;return join(["enum",e,join(i," "),block(t)]," ")}),EnumValueDefinition:addDescription(function(n){return join([n.name,join(n.directives," ")]," ")}),InputObjectTypeDefinition:addDescription(function(n){var e=n.name,i=n.directives,t=n.fields;return join(["input",e,join(i," "),block(t)]," ")}),DirectiveDefinition:addDescription(function(n){var e=n.name,i=n.arguments,t=n.repeatable,r=n.locations;return"directive @"+e+(hasMultilineItems(i)?wrap("(\n",indent(join(i,"\n")),"\n)"):wrap("(",join(i,", "),")"))+(t?" repeatable":"")+" on "+join(r," | ")}),SchemaExtension:function(n){var e=n.directives,i=n.operationTypes;return join(["extend schema",join(e," "),block(i)]," ")},ScalarTypeExtension:function(n){return join(["extend scalar",n.name,join(n.directives," ")]," ")},ObjectTypeExtension:function(n){var e=n.name,i=n.interfaces,t=n.directives,r=n.fields;return join(["extend type",e,wrap("implements ",join(i," & ")),join(t," "),block(r)]," ")},InterfaceTypeExtension:function(n){var e=n.name,i=n.directives,t=n.fields;return join(["extend interface",e,join(i," "),block(t)]," ")},UnionTypeExtension:function(n){var e=n.name,i=n.directives,t=n.types;return join(["extend union",e,join(i," "),t&&0!==t.length?"= "+join(t," | "):""]," ")},EnumTypeExtension:function(n){var e=n.name,i=n.directives,t=n.values;return join(["extend enum",e,join(i," "),block(t)]," ")},InputObjectTypeExtension:function(n){var e=n.name,i=n.directives,t=n.fields;return join(["extend input",e,join(i," "),block(t)]," ")}};function addDescription(n){return function(e){return join([e.description,n(e)],"\n")}}function join(n,e){return n?n.filter(function(n){return n}).join(e||""):""}function block(n){return n&&0!==n.length?"{\n"+indent(join(n,"\n"))+"\n}":""}function wrap(n,e,i){return e?n+e+(i||""):""}function indent(n){return n&&"  "+n.replace(/\n/g,"\n  ")}function isMultiline(n){return-1!==n.indexOf("\n")}function hasMultilineItems(n){return n&&n.some(isMultiline)}
},{"./blockString":9,"./visitor":11}],11:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.visit=visit,exports.visitInParallel=visitInParallel,exports.visitWithTypeInfo=visitWithTypeInfo,exports.getVisitFn=getVisitFn,exports.BREAK=exports.QueryDocumentKeys=void 0;var _inspect=_interopRequireDefault(_dereq_("../jsutils/inspect"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};exports.QueryDocumentKeys=QueryDocumentKeys;var BREAK=Object.freeze({});function visit(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:QueryDocumentKeys,t=void 0,r=Array.isArray(e),a=[e],s=-1,o=[],l=void 0,u=void 0,p=void 0,v=[],f=[],c=e;do{var d=++s===a.length,y=d&&0!==o.length;if(d){if(u=0===f.length?void 0:v[v.length-1],l=p,p=f.pop(),y){if(r)l=l.slice();else{for(var m={},g=0,D=Object.keys(l);g<D.length;g++){var h=D[g];m[h]=l[h]}l=m}for(var T=0,V=0;V<o.length;V++){var E=o[V][0],A=o[V][1];r&&(E-=T),r&&null===A?(l.splice(E,1),T++):l[E]=A}}s=t.index,a=t.keys,o=t.edits,r=t.inArray,t=t.prev}else{if(u=p?r?s:a[s]:void 0,null==(l=p?p[u]:c))continue;p&&v.push(u)}var x=void 0;if(!Array.isArray(l)){if(!isNode(l))throw new Error("Invalid AST Node: "+(0,_inspect.default)(l));var b=getVisitFn(i,l.kind,d);if(b){if((x=b.call(i,l,u,p,v,f))===BREAK)break;if(!1===x){if(!d){v.pop();continue}}else if(void 0!==x&&(o.push([u,x]),!d)){if(!isNode(x)){v.pop();continue}l=x}}}void 0===x&&y&&o.push([u,l]),d?v.pop():(t={inArray:r,index:s,keys:a,edits:o,prev:t},a=(r=Array.isArray(l))?l:n[l.kind]||[],s=-1,o=[],p&&f.push(p),p=l)}while(void 0!==t);return 0!==o.length&&(c=o[o.length-1][1]),c}function isNode(e){return Boolean(e&&"string"==typeof e.kind)}function visitInParallel(e){var i=new Array(e.length);return{enter:function(n){for(var t=0;t<e.length;t++)if(!i[t]){var r=getVisitFn(e[t],n.kind,!1);if(r){var a=r.apply(e[t],arguments);if(!1===a)i[t]=n;else if(a===BREAK)i[t]=BREAK;else if(void 0!==a)return a}}},leave:function(n){for(var t=0;t<e.length;t++)if(i[t])i[t]===n&&(i[t]=null);else{var r=getVisitFn(e[t],n.kind,!0);if(r){var a=r.apply(e[t],arguments);if(a===BREAK)i[t]=BREAK;else if(void 0!==a&&!1!==a)return a}}}}}function visitWithTypeInfo(e,i){return{enter:function(n){e.enter(n);var t=getVisitFn(i,n.kind,!1);if(t){var r=t.apply(i,arguments);return void 0!==r&&(e.leave(n),isNode(r)&&e.enter(r)),r}},leave:function(n){var t,r=getVisitFn(i,n.kind,!0);return r&&(t=r.apply(i,arguments)),e.leave(n),t}}}function getVisitFn(e,i,n){var t=e[i];if(t){if(!n&&"function"==typeof t)return t;var r=n?t.leave:t.enter;if("function"==typeof r)return r}else{var a=n?e.leave:e.enter;if(a){if("function"==typeof a)return a;var s=a[i];if("function"==typeof s)return s}}}exports.BREAK=BREAK;
},{"../jsutils/inspect":7}],12:[function(_dereq_,module,exports){
var mkProperty=function(n,t,r,i){void 0===i&&(i=!0),Object.defineProperty(n,t,{configurable:!1,enumerable:!1,writable:i,value:r})},Latching=function(){mkProperty(this,"_latching_reg",{}),mkProperty(this,"_latching_cnt",0),mkProperty(this,"_latching_proc",{}),mkProperty(this,"_latching_plugin",{}),this.proc("none",function(){},function(){}),this.proc("pass",function(n){return n[0]},function(n,t){return t}),this.proc("or",function(){return!1},function(n,t){return n||t}),this.proc("and",function(){return!0},function(n,t){return n&&t}),this.proc("mult",function(){return 1},function(n,t){return n*t}),this.proc("add",function(){return 0},function(n,t){return n+t}),this.proc("append",function(){return""},function(n,t){return n+t}),this.proc("push",function(){return[]},function(n,t){return n.push(t),n}),this.proc("concat",function(){return[]},function(n,t){return n.concat(t)}),this.proc("insert",function(){return{}},function(n,t){return n[t]=!0,n}),this.proc("assign",function(){return{}},function(n,t){Object.keys(t).forEach(function(r){n[r]=t[r]})})};Latching.prototype={proc:function(n,t,r){if(3!==arguments.length)throw new Error("proc: invalid number of arguments");if("string"!=typeof n)throw new Error("proc: invalid name argument (has to be string)");if("function"!=typeof t)throw new Error("proc: invalid init argument (has to be function)");if("function"!=typeof r)throw new Error("proc: invalid step argument (has to be function)");return this._latching_proc[n]={init:t,step:r},this},at:function(){return this.latch.apply(this,arguments)},latch:function(n,t,r,i){if(arguments.length<2||arguments.length>4)throw new Error("latch: invalid number of arguments");void 0===this._latching_reg[n]&&(this._latching_reg[n]=[]);var o=this._latching_cnt++,e={id:o,cb:t,ctx:r};return i?this._latching_reg[n].unshift(e):this._latching_reg[n].push(e),o},unlatch:function(n,t){if(2!==arguments.length)throw new Error("unlatch: invalid number of arguments");if(void 0===this._latching_reg[n])throw new Error('unlatch: no such hook "'+n+'"');for(var r=-1,i=0;i<this._latching_reg[n].length;i++)if(this._latching_reg[n][i].id===t){r=i;break}if(-1===r)throw new Error("unlatch: no such latched callback");return this._latching_reg[n].splice(r,1),this},hook:function(n,t){if(arguments.length<2)throw new Error("hook: invalid number of arguments");if(void 0===this._latching_proc[t])throw new Error("hook: no such result processing defined");var r=Array.prototype.slice.call(arguments,2),i=this._latching_proc[t].init.call(null,r);if(void 0!==this._latching_reg[n])for(var o=0;o<this._latching_reg[n].length;o++){var e=this._latching_reg[n][o],c=!1,u=e.cb.apply(e.ctx,r.concat([i,function(){c=!0}]));if(i=this._latching_proc[t].step.call(null,i,u),c)break}return i},use:function(n,t){if("object"!=typeof n&&"function"!=typeof n)throw new Error("use: invalid plugin argument (object or function/class expected)");"function"==typeof n&&(n=new n);var r=this._latching_cnt++,i={id:r,plugin:n};if(this._latching_plugin[r]=i,"function"!=typeof n.use)throw new Error('use: invalid plugin (method "use" expected)');return void 0===t&&(t={}),n.use(this,t),r},unuse:function(n){if(1!==arguments.length)throw new Error("unuse: invalid number of arguments");if(void 0===this._latching_plugins[n])throw new Error("unuse: no such plugin found");var t=this._latching_plugins[n].plugin;return"function"==typeof t.unuse&&t.unuse(this),this._latching_plugins[n].plugin=null,delete this._latching_plugins[n],this}},module.exports=Latching;
},{}],13:[function(_dereq_,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],14:[function(_dereq_,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).WebSocketFramed=t()}}(function(){return function(){return function t(e,r,n){function i(f,u){if(!r[f]){if(!e[f]){var a="function"==typeof _dereq_&&_dereq_;if(!u&&a)return a(f,!0);if(o)return o(f,!0);var s=new Error("Cannot find module '"+f+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[f]={exports:{}};e[f][0].call(c.exports,function(t){return i(e[f][1][t]||t)},c,c.exports,t,e,r,n)}return r[f].exports}for(var o="function"==typeof _dereq_&&_dereq_,f=0;f<n.length;f++)i(n[f]);return i}}()({1:[function(t,e,r){(function(n){!function(t){"object"==typeof r&&void 0!==e?e.exports=t():("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).Encodr=t()}(function(){return function e(r,n,i){function o(u,a){if(!n[u]){if(!r[u]){var s="function"==typeof t&&t;if(!a&&s)return s(u,!0);if(f)return f(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[u]={exports:{}};r[u][0].call(h.exports,function(t){return o(r[u][1][t]||t)},h,h.exports,e,r,n,i)}return n[u].exports}for(var f="function"==typeof t&&t,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(t,e,r){"use strict";r.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},r.toByteArray=function(t){var e,r,n=s(t),f=n[0],u=n[1],a=new o(3*(f+u)/4-u),c=0,h=u>0?f-4:f;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],a[c++]=e>>16&255,a[c++]=e>>8&255,a[c++]=255&e;return 2===u&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,a[c++]=255&e),1===u&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,a[c++]=e>>8&255,a[c++]=255&e),a},r.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],f=0,u=r-i;f<u;f+=16383)o.push(h(t,f,f+16383>u?u:f+16383));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=f.length;u<a;++u)n[u]=f[u],i[f.charCodeAt(u)]=u;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function h(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(c(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(t,e,r){(function(e){"use strict";var n=t("base64-js"),i=t("ieee754"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=e,r.SlowBuffer=function(t){return+t!=t&&(t=0),e.alloc(+t)},r.INSPECT_MAX_BYTES=50;var f=2147483647;function u(t){if(t>f)throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=new Uint8Array(t);return Object.setPrototypeOf(r,e.prototype),r}function e(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return a(t,e,r)}function a(t,r,n){if("string"==typeof t)return function(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|p(t,r),i=u(n),o=i.write(t,r);return o!==n&&(i=i.slice(0,o)),i}(t,r);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(D(t,ArrayBuffer)||t&&D(t.buffer,ArrayBuffer))return function(t,r,n){if(r<0||t.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Object.setPrototypeOf(i,e.prototype),i}(t,r,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return e.from(i,r,n);var o=function(t){if(e.isBuffer(t)){var r=0|l(t.length),n=u(r);return 0===n.length?n:(t.copy(n,0,0,r),n)}return void 0!==t.length?"number"!=typeof t.length||F(t.length)?u(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return e.from(t[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return s(t),u(t<0?0:0|l(t))}function h(t){for(var e=t.length<0?0:0|l(t.length),r=u(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t){if(t>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|t}function p(t,r){if(e.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||D(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(o)return i?-1:M(t).length;r=(""+r).toLowerCase(),o=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,r,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),F(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=e.from(r,i)),e.isBuffer(r))return 0===r.length?-1:v(t,r,n,i,o);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):v(t,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,f=1,u=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;f=2,u/=2,a/=2,r/=2}function s(t,e){return 1===f?t[e]:t.readUInt16BE(e*f)}if(i){var c=-1;for(o=r;o<u;o++)if(s(t,o)===s(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===a)return c*f}else-1!==c&&(o-=o-c),c=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){for(var h=!0,l=0;l<a;l++)if(s(t,o+l)!==s(e,l)){h=!1;break}if(h)return o}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var f=0;f<n;++f){var u=parseInt(e.substr(2*f,2),16);if(F(u))return f;t[r+f]=u}return f}function b(t,e,r,n){return N(M(e,t.length-r),t,r,n)}function g(t,e,r,n){return N(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function m(t,e,r,n){return g(t,e,r,n)}function E(t,e,r,n){return N(j(e),t,r,n)}function A(t,e,r,n){return N(function(t,e){for(var r,n,i,o=[],f=0;f<t.length&&!((e-=2)<0);++f)n=(r=t.charCodeAt(f))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,f,u,a,s=t[i],c=null,h=s>239?4:s>223?3:s>191?2:1;if(i+h<=r)switch(h){case 1:s<128&&(c=s);break;case 2:128==(192&(o=t[i+1]))&&(a=(31&s)<<6|63&o)>127&&(c=a);break;case 3:o=t[i+1],f=t[i+2],128==(192&o)&&128==(192&f)&&(a=(15&s)<<12|(63&o)<<6|63&f)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:o=t[i+1],f=t[i+2],u=t[i+3],128==(192&o)&&128==(192&f)&&128==(192&u)&&(a=(15&s)<<18|(63&o)<<12|(63&f)<<6|63&u)>65535&&a<1114112&&(c=a)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=U)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=U));return r}(n)}r.kMaxLength=f,e.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(t,e,r){return a(t,e,r)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array),e.alloc=function(t,e,r){return function(t,e,r){return s(t),t<=0?u(t):void 0!==e?"string"==typeof r?u(t).fill(e,r):u(t).fill(e):u(t)}(t,e,r)},e.allocUnsafe=function(t){return c(t)},e.allocUnsafeSlow=function(t){return c(t)},e.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==e.prototype},e.compare=function(t,r){if(D(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),D(r,Uint8Array)&&(r=e.from(r,r.offset,r.byteLength)),!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;for(var n=t.length,i=r.length,o=0,f=Math.min(n,i);o<f;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0},e.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=e.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var f=t[n];if(D(f,Uint8Array)&&(f=e.from(f)),!e.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(i,o),o+=f.length}return i},e.byteLength=p,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},e.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},e.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},e.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},o&&(e.prototype[o]=e.prototype.inspect),e.prototype.compare=function(t,r,n,i,o){if(D(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),!e.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(this===t)return 0;for(var f=(o>>>=0)-(i>>>=0),u=(n>>>=0)-(r>>>=0),a=Math.min(f,u),s=this.slice(i,o),c=t.slice(r,n),h=0;h<a;++h)if(s[h]!==c[h]){f=s[h],u=c[h];break}return f<u?-1:u<f?1:0},e.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},e.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},e.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},e.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return g(this,t,e,r);case"latin1":case"binary":return m(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function S(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=V[t[o]];return i}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,r,n,i,o,f){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<f)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function _(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(t,e,r,n,o){return e=+e,r>>>=0,o||_(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function L(t,e,r,n,o){return e=+e,r>>>=0,o||_(t,0,r,8),i.write(t,e,r,n,52,8),r+8}e.prototype.slice=function(t,r){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t);var i=this.subarray(t,r);return Object.setPrototypeOf(i,e.prototype),i},e.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},e.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||I(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},e.prototype.readUInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),this[t]},e.prototype.readUInt16LE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]|this[t+1]<<8},e.prototype.readUInt16BE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]<<8|this[t+1]},e.prototype.readUInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},e.prototype.readUInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},e.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},e.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||I(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},e.prototype.readInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},e.prototype.readInt16LE=function(t,e){t>>>=0,e||I(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(t,e){t>>>=0,e||I(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},e.prototype.readInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},e.prototype.readFloatLE=function(t,e){return t>>>=0,e||I(t,4,this.length),i.read(this,t,!0,23,4)},e.prototype.readFloatBE=function(t,e){return t>>>=0,e||I(t,4,this.length),i.read(this,t,!1,23,4)},e.prototype.readDoubleLE=function(t,e){return t>>>=0,e||I(t,8,this.length),i.read(this,t,!0,52,8)},e.prototype.readDoubleBE=function(t,e){return t>>>=0,e||I(t,8,this.length),i.read(this,t,!1,52,8)},e.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},e.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},e.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,1,255,0),this[e]=255&t,e+1},e.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},e.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=0,f=1,u=0;for(this[e]=255&t;++o<r&&(f*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/f>>0)-u&255;return e+r},e.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=r-1,f=1,u=0;for(this[e+o]=255&t;--o>=0&&(f*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/f>>0)-u&255;return e+r},e.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},e.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},e.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeFloatLE=function(t,e,r){return C(this,t,e,!0,r)},e.prototype.writeFloatBE=function(t,e,r){return C(this,t,e,!1,r)},e.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},e.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},e.prototype.copy=function(t,r,n,i){if(!e.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var o=i-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,i);else if(this===t&&n<r&&r<i)for(var f=o-1;f>=0;--f)t[f+r]=this[f+n];else Uint8Array.prototype.set.call(t,this.subarray(n,i),r);return o},e.prototype.fill=function(t,r,n,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var f;if(r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(f=r;f<n;++f)this[f]=t;else{var u=e.isBuffer(t)?t:e.from(t,i),a=u.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(f=0;f<n-r;++f)this[f+r]=u[f%a]}return this};var R=/[^+/0-9A-Za-z-_]/g;function M(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],f=0;f<n;++f){if((r=t.charCodeAt(f))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(f+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function D(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function F(t){return t!=t}var V=function(){for(var t=new Array(256),e=0;e<16;++e)for(var r=16*e,n=0;n<16;++n)t[r+n]="0123456789abcdef"[e]+"0123456789abcdef"[n];return t}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:5}],3:[function(t,e,r){!function(t,r){"use strict";var n=Math.pow(2,-24),i=Math.pow(2,32),o=Math.pow(2,53),f={encode:function(t){var e,n=new ArrayBuffer(256),f=new DataView(n),u=0;function a(t){for(var r=n.byteLength,i=u+t;r<i;)r*=2;if(r!==n.byteLength){var o=f;n=new ArrayBuffer(r),f=new DataView(n);for(var a=u+3>>2,s=0;s<a;++s)f.setUint32(4*s,o.getUint32(4*s))}return e=t,f}function s(){u+=e}function c(t){s(a(1).setUint8(u,t))}function h(t){for(var e=a(t.length),r=0;r<t.length;++r)e.setUint8(u+r,t[r]);s()}function l(t,e){var r;e<24?c(t<<5|e):e<256?(c(t<<5|24),c(e)):e<65536?(c(t<<5|25),r=e,s(a(2).setUint16(u,r))):e<4294967296?(c(t<<5|26),function(t){s(a(4).setUint32(u,t))}(e)):(c(t<<5|27),function(t){var e=t%i,r=(t-e)/i,n=a(8);n.setUint32(u,r),n.setUint32(u+4,e),s()}(e))}if(function t(e){var n;if(!1===e)return c(244);if(!0===e)return c(245);if(null===e)return c(246);if(e===r)return c(247);switch(typeof e){case"number":if(Math.floor(e)===e){if(0<=e&&e<=o)return l(0,e);if(-o<=e&&e<0)return l(1,-(e+1))}return c(251),function(t){s(a(8).setFloat64(u,t))}(e);case"string":var i=[];for(n=0;n<e.length;++n){var f=e.charCodeAt(n);f<128?i.push(f):f<2048?(i.push(192|f>>6),i.push(128|63&f)):f<55296?(i.push(224|f>>12),i.push(128|f>>6&63),i.push(128|63&f)):(f=(1023&f)<<10,f|=1023&e.charCodeAt(++n),f+=65536,i.push(240|f>>18),i.push(128|f>>12&63),i.push(128|f>>6&63),i.push(128|63&f))}return l(3,i.length),h(i);default:var p;if(Array.isArray(e))for(l(4,p=e.length),n=0;n<p;++n)t(e[n]);else if(e instanceof Uint8Array)l(2,e.length),h(e);else{var d=Object.keys(e);for(l(5,p=d.length),n=0;n<p;++n){var y=d[n];t(y),t(e[y])}}}}(t),"slice"in n)return n.slice(0,u);for(var p=new ArrayBuffer(u),d=new DataView(p),y=0;y<u;++y)d.setUint8(y,f.getUint8(y));return p},decode:function(t,e,o){var f=new DataView(t),u=0;function a(t,e){return u+=e,t}function s(e){return a(new Uint8Array(t,u,e),e)}function c(){return a(f.getUint8(u),1)}function h(){return a(f.getUint16(u),2)}function l(){return a(f.getUint32(u),4)}function p(){return 255===f.getUint8(u)&&(u+=1,!0)}function d(t){if(t<24)return t;if(24===t)return c();if(25===t)return h();if(26===t)return l();if(27===t)return l()*i+l();if(31===t)return-1;throw"Invalid length encoding"}function y(t){var e=c();if(255===e)return-1;var r=d(31&e);if(r<0||e>>5!==t)throw"Invalid indefinite length element";return r}function v(t,e){for(var r=0;r<e;++r){var n=c();128&n&&(n<224?(n=(31&n)<<6|63&c(),e-=1):n<240?(n=(15&n)<<12|(63&c())<<6|63&c(),e-=2):(n=(15&n)<<18|(63&c())<<12|(63&c())<<6|63&c(),e-=3)),n<65536?t.push(n):(n-=65536,t.push(55296|n>>10),t.push(56320|1023&n))}}"function"!=typeof e&&(e=function(t){return t}),"function"!=typeof o&&(o=function(){return r});var w=function t(){var i,l,w=c(),b=w>>5,g=31&w;if(7===b)switch(g){case 25:return function(){var t=new ArrayBuffer(4),e=new DataView(t),r=h(),i=32768&r,o=31744&r,f=1023&r;if(31744===o)o=261120;else if(0!==o)o+=114688;else if(0!==f)return f*n;return e.setUint32(0,i<<16|o<<13|f<<13),e.getFloat32(0)}();case 26:return a(f.getFloat32(u),4);case 27:return a(f.getFloat64(u),8)}if((l=d(g))<0&&(b<2||6<b))throw"Invalid length";switch(b){case 0:return l;case 1:return-1-l;case 2:if(l<0){for(var m=[],E=0;(l=y(b))>=0;)E+=l,m.push(s(l));var A=new Uint8Array(E),x=0;for(i=0;i<m.length;++i)A.set(m[i],x),x+=m[i].length;return A}return s(l);case 3:var B=[];if(l<0)for(;(l=y(b))>=0;)v(B,l);else v(B,l);return String.fromCharCode.apply(null,B);case 4:var U;if(l<0)for(U=[];!p();)U.push(t());else for(U=new Array(l),i=0;i<l;++i)U[i]=t();return U;case 5:var k={};for(i=0;i<l||l<0&&!p();++i)k[t()]=t();return k;case 6:return e(t(),l);case 7:switch(l){case 20:return!1;case 21:return!0;case 22:return null;case 23:return r;default:return o(l)}}}();if(u!==t.byteLength)throw"Remaining bytes";return w}};void 0!==e&&e.exports?e.exports=f:t.CBOR||(t.CBOR=f)}(this)},{}],4:[function(t,e,r){!function(t){void 0!==e&&(e.exports=t);var r="listeners",n={on:function(t,e){return f(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,f(r,t).push(n),r;function n(){o.call(r,t,n),e.apply(this,arguments)}},off:o,emit:function(t,e){var r=this,n=f(r,t,!0);if(!n)return!1;var i=arguments.length;if(1===i)n.forEach(function(t){t.call(r)});else if(2===i)n.forEach(function(t){t.call(r,e)});else{var o=Array.prototype.slice.call(arguments,1);n.forEach(function(t){t.apply(r,o)})}return!!n.length}};function i(t){for(var e in n)t[e]=n[e];return t}function o(t,e){var n;if(arguments.length){if(e){if(n=f(this,t,!0)){if(!(n=n.filter(function(t){return t!==e&&t.originalListener!==e})).length)return o.call(this,t);this[r][t]=n}}else if((n=this[r])&&(delete n[t],!Object.keys(n).length))return o.call(this)}else delete this[r];return this}function f(t,e,n){if(!n||t[r]){var i=t[r]||(t[r]={});return i[e]||(i[e]=[])}}i(t.prototype),t.mixin=i}(function t(){if(!(this instanceof t))return new t})},{}],5:[function(t,e,r){r.read=function(t,e,r,n,i){var o,f,u=8*i-n-1,a=(1<<u)-1,s=a>>1,c=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+t[e+h],h+=l,c-=8);for(f=o&(1<<-c)-1,o>>=-c,c+=n;c>0;f=256*f+t[e+h],h+=l,c-=8);if(0===o)o=1-s;else{if(o===a)return f?NaN:1/0*(p?-1:1);f+=Math.pow(2,n),o-=s}return(p?-1:1)*f*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var f,u,a,s=8*o-i-1,c=(1<<s)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,f=c):(f=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-f))<1&&(f--,a*=2),(e+=f+h>=1?l/a:l*Math.pow(2,1-h))*a>=2&&(f++,a/=2),f+h>=c?(u=0,f=c):f+h>=1?(u=(e*a-1)*Math.pow(2,i),f+=h):(u=e*Math.pow(2,h-1)*Math.pow(2,i),f=0));i>=8;t[r+p]=255&u,p+=d,u/=256,i-=8);for(f=f<<i|u,s+=i;s>0;t[r+p]=255&f,p+=d,f/=256,s-=8);t[r+p-d]|=128*y}},{}],6:[function(t,e,r){(function(t){!function(e){var r,n="undefined",i=n!==typeof t&&t,o=n!==typeof Uint8Array&&Uint8Array,f=n!==typeof ArrayBuffer&&ArrayBuffer,u=[0,0,0,0,0,0,0,0],a=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},s=4294967296,c=16777216;function h(t,a,h){var A=a?0:4,x=a?4:0,B=a?0:3,U=a?1:2,k=a?2:1,T=a?3:0,S=a?b:m,O=a?g:E,I=C.prototype,P="is"+t,_="_"+P;return I.buffer=void 0,I.offset=0,I[_]=!0,I.toNumber=L,I.toString=function(t){var e=this.buffer,r=this.offset,n=M(e,r+A),i=M(e,r+x),o="",f=!h&&2147483648&n;for(f&&(n=~n,i=s-i),t=t||10;;){var u=n%t*s+i;if(n=Math.floor(n/t),i=Math.floor(u/t),o=(u%t).toString(t)+o,!n&&!i)break}return f&&(o="-"+o),o},I.toJSON=L,I.toArray=l,i&&(I.toBuffer=p),o&&(I.toArrayBuffer=d),C[P]=function(t){return!(!t||!t[_])},e[t]=C,C;function C(t,e,i,a){return this instanceof C?function(t,e,i,a,c){o&&f&&(e instanceof f&&(e=new o(e)),a instanceof f&&(a=new o(a))),e||i||a||r?(y(e,i)||(c=i,a=e,i=0,e=new(r||Array)(8)),t.buffer=e,t.offset=i|=0,n!==typeof a&&("string"==typeof a?function(t,e,r,n){var i=0,o=r.length,f=0,u=0;"-"===r[0]&&i++;for(var a=i;i<o;){var c=parseInt(r[i++],n);if(!(c>=0))break;u=u*n+c,f=f*n+Math.floor(u/s),u%=s}a&&(f=~f,u?u=s-u:f++),R(t,e+A,f),R(t,e+x,u)}(e,i,a,c||10):y(a,c)?v(e,i,a,c):"number"==typeof c?(R(e,i+A,a),R(e,i+x,c)):a>0?S(e,i,a):a<0?O(e,i,a):v(e,i,u,0))):t.buffer=w(u,0)}(this,t,e,i,a):new C(t,e,i,a)}function L(){var t=this.buffer,e=this.offset,r=M(t,e+A),n=M(t,e+x);return h||(r|=0),r?r*s+n:n}function R(t,e,r){t[e+T]=255&r,r>>=8,t[e+k]=255&r,r>>=8,t[e+U]=255&r,r>>=8,t[e+B]=255&r}function M(t,e){return t[e+B]*c+(t[e+U]<<16)+(t[e+k]<<8)+t[e+T]}}function l(t){var e=this.buffer,n=this.offset;return r=null,!1!==t&&0===n&&8===e.length&&a(e)?e:w(e,n)}function p(e){var n=this.buffer,o=this.offset;if(r=i,!1!==e&&0===o&&8===n.length&&t.isBuffer(n))return n;var f=new i(8);return v(f,0,n,o),f}function d(t){var e=this.buffer,n=this.offset,i=e.buffer;if(r=o,!1!==t&&0===n&&i instanceof f&&8===i.byteLength)return i;var u=new o(8);return v(u,0,e,n),u.buffer}function y(t,e){var r=t&&t.length;return e|=0,r&&e+8<=r&&"string"!=typeof t[e]}function v(t,e,r,n){e|=0,n|=0;for(var i=0;i<8;i++)t[e++]=255&r[n++]}function w(t,e){return Array.prototype.slice.call(t,e,e+8)}function b(t,e,r){for(var n=e+8;n>e;)t[--n]=255&r,r/=256}function g(t,e,r){var n=e+8;for(r++;n>e;)t[--n]=255&-r^255,r/=256}function m(t,e,r){for(var n=e+8;e<n;)t[e++]=255&r,r/=256}function E(t,e,r){var n=e+8;for(r++;e<n;)t[e++]=255&-r^255,r/=256}h("Uint64BE",!0,!0),h("Int64BE",!0,!1),h("Uint64LE",!1,!0),h("Int64LE",!1,!1)}("object"==typeof r&&"string"!=typeof r.nodeName?r:this||{})}).call(this,t("buffer").Buffer)},{buffer:2}],7:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],8:[function(t,e,r){r.encode=t("./encode").encode,r.decode=t("./decode").decode,r.Encoder=t("./encoder").Encoder,r.Decoder=t("./decoder").Decoder,r.createCodec=t("./ext").createCodec,r.codec=t("./codec").codec},{"./codec":17,"./decode":19,"./decoder":20,"./encode":22,"./encoder":23,"./ext":27}],9:[function(t,e,r){(function(t){function r(t){return t&&t.isBuffer&&t}e.exports=r(void 0!==t&&t)||r(this.Buffer)||r("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,t("buffer").Buffer)},{buffer:2}],10:[function(t,e,r){r.copy=function(t,e,r,n){var i;r||(r=0),n||0===n||(n=this.length),e||(e=0);var o=n-r;if(t===this&&r<e&&e<n)for(i=o-1;i>=0;i--)t[i+e]=this[i+r];else for(i=0;i<o;i++)t[i+e]=this[i+r];return o},r.toString=function(t,e,r){var n=0|e;r||(r=this.length);for(var i="",o=0;n<r;)(o=this[n++])<128?i+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&this[n++]:224==(240&o)?o=(15&o)<<12|(63&this[n++])<<6|63&this[n++]:240==(248&o)&&(o=(7&o)<<18|(63&this[n++])<<12|(63&this[n++])<<6|63&this[n++]),o>=65536?(o-=65536,i+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):i+=String.fromCharCode(o));return i},r.write=function(t,e){for(var r=e||(e|=0),n=t.length,i=0,o=0;o<n;)(i=t.charCodeAt(o++))<128?this[r++]=i:i<2048?(this[r++]=192|i>>>6,this[r++]=128|63&i):i<55296||i>57343?(this[r++]=224|i>>>12,this[r++]=128|i>>>6&63,this[r++]=128|63&i):(i=65536+(i-55296<<10|t.charCodeAt(o++)-56320),this[r++]=240|i>>>18,this[r++]=128|i>>>12&63,this[r++]=128|i>>>6&63,this[r++]=128|63&i);return r-e}},{}],11:[function(t,e,r){var n=t("./bufferish");function i(t){return new Array(t)}(r=e.exports=i(0)).alloc=i,r.concat=n.concat,r.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return n.from.call(r,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},{"./bufferish":15}],12:[function(t,e,r){var n=t("./bufferish"),i=n.global;function o(t){return new i(t)}(r=e.exports=n.hasBuffer?o(0):[]).alloc=n.hasBuffer&&i.alloc||o,r.concat=n.concat,r.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return n.from.call(r,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(t):new i(t)}},{"./bufferish":15}],13:[function(t,e,r){var n,i=t("./buffer-lite");r.copy=s,r.slice=c,r.toString=function(t,e,r){return(!u&&o.isBuffer(this)?this.toString:i.toString).apply(this,arguments)},r.write=(n="write",function(){return(this[n]||i[n]).apply(this,arguments)});var o=t("./bufferish"),f=o.global,u=o.hasBuffer&&"TYPED_ARRAY_SUPPORT"in f,a=u&&!f.TYPED_ARRAY_SUPPORT;function s(t,e,r,n){var f=o.isBuffer(this),u=o.isBuffer(t);if(f&&u)return this.copy(t,e,r,n);if(a||f||u||!o.isView(this)||!o.isView(t))return i.copy.call(this,t,e,r,n);var s=r||null!=n?c.call(this,r,n):this;return t.set(s,e),s.length}function c(t,e){var r=this.slice||!a&&this.subarray;if(r)return r.call(this,t,e);var n=o.alloc.call(this,e-t);return s.call(this,n,0,t,e),n}},{"./buffer-lite":10,"./bufferish":15}],14:[function(t,e,r){var n=t("./bufferish");function i(t){return new Uint8Array(t)}(r=e.exports=n.hasArrayBuffer?i(0):[]).alloc=i,r.concat=n.concat,r.from=function(t){if(n.isView(t)){var e=t.byteOffset,i=t.byteLength;(t=t.buffer).byteLength!==i&&(t.slice?t=t.slice(e,e+i):(t=new Uint8Array(t)).byteLength!==i&&(t=Array.prototype.slice.call(t,e,e+i)))}else{if("string"==typeof t)return n.from.call(r,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},{"./bufferish":15}],15:[function(t,e,r){var n=r.global=t("./buffer-global"),i=r.hasBuffer=n&&!!n.isBuffer,o=r.hasArrayBuffer="undefined"!=typeof ArrayBuffer,f=r.isArray=t("isarray");r.isArrayBuffer=o?function(t){return t instanceof ArrayBuffer||d(t)}:v;var u=r.isBuffer=i?n.isBuffer:v,a=r.isView=o?ArrayBuffer.isView||w("ArrayBuffer","buffer"):v;r.alloc=p,r.concat=function(t,e){e||(e=0,Array.prototype.forEach.call(t,function(t){e+=t.length}));var n=this!==r&&this||t[0],i=p.call(n,e),o=0;return Array.prototype.forEach.call(t,function(t){o+=l.copy.call(t,i,o)}),i},r.from=function(t){return"string"==typeof t?function(t){var e=3*t.length,r=p.call(this,e),n=l.write.call(r,t);return e!==n&&(r=l.slice.call(r,0,n)),r}.call(this,t):y(this).from(t)};var s=r.Array=t("./bufferish-array"),c=r.Buffer=t("./bufferish-buffer"),h=r.Uint8Array=t("./bufferish-uint8array"),l=r.prototype=t("./bufferish-proto");function p(t){return y(this).alloc(t)}var d=w("ArrayBuffer");function y(t){return u(t)?c:a(t)?h:f(t)?s:i?c:o?h:s}function v(){return!1}function w(t,e){return t="[object "+t+"]",function(r){return null!=r&&{}.toString.call(e?r[e]:r)===t}}},{"./buffer-global":9,"./bufferish-array":11,"./bufferish-buffer":12,"./bufferish-proto":13,"./bufferish-uint8array":14,isarray:7}],16:[function(t,e,r){var n=t("isarray");r.createCodec=u,r.install=function(t){for(var e in t)o.prototype[e]=f(o.prototype[e],t[e])},r.filter=function(t){return n(t)?function(t){return t=t.slice(),function(r){return t.reduce(e,r)};function e(t,e){return e(t)}}(t):t};var i=t("./bufferish");function o(t){if(!(this instanceof o))return new o(t);this.options=t,this.init()}function f(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function u(t){return new o(t)}o.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=i.Uint8Array),this},r.preset=u({preset:!0})},{"./bufferish":15,isarray:7}],17:[function(t,e,r){t("./read-core"),t("./write-core"),r.codec={preset:t("./codec-base").preset}},{"./codec-base":16,"./read-core":29,"./write-core":32}],18:[function(t,e,r){r.DecodeBuffer=i;var n=t("./read-core").preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}t("./flex-buffer").FlexDecoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":28,"./read-core":29}],19:[function(t,e,r){r.decode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./decode-buffer").DecodeBuffer},{"./decode-buffer":18}],20:[function(t,e,r){r.Decoder=o;var n=t("event-lite"),i=t("./decode-buffer").DecodeBuffer;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},o.prototype.push=function(t){this.emit("data",t)},o.prototype.end=function(t){this.decode(t),this.emit("end")}},{"./decode-buffer":18,"event-lite":4}],21:[function(t,e,r){r.EncodeBuffer=i;var n=t("./write-core").preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}t("./flex-buffer").FlexEncoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.write=function(t){this.codec.encode(this,t)}},{"./flex-buffer":28,"./write-core":32}],22:[function(t,e,r){r.encode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./encode-buffer").EncodeBuffer},{"./encode-buffer":21}],23:[function(t,e,r){r.Encoder=o;var n=t("event-lite"),i=t("./encode-buffer").EncodeBuffer;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},o.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},{"./encode-buffer":21,"event-lite":4}],24:[function(t,e,r){r.ExtBuffer=function t(e,r){if(!(this instanceof t))return new t(e,r);this.buffer=n.from(e),this.type=r};var n=t("./bufferish")},{"./bufferish":15}],25:[function(t,e,r){r.setExtPackers=function(t){t.addExtPacker(14,Error,[h,a]),t.addExtPacker(1,EvalError,[h,a]),t.addExtPacker(2,RangeError,[h,a]),t.addExtPacker(3,ReferenceError,[h,a]),t.addExtPacker(4,SyntaxError,[h,a]),t.addExtPacker(5,TypeError,[h,a]),t.addExtPacker(6,URIError,[h,a]),t.addExtPacker(10,RegExp,[c,a]),t.addExtPacker(11,Boolean,[s,a]),t.addExtPacker(12,String,[s,a]),t.addExtPacker(13,Date,[Number,a]),t.addExtPacker(15,Number,[s,a]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,f),t.addExtPacker(18,Uint8Array,f),t.addExtPacker(19,Int16Array,f),t.addExtPacker(20,Uint16Array,f),t.addExtPacker(21,Int32Array,f),t.addExtPacker(22,Uint32Array,f),t.addExtPacker(23,Float32Array,f),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,f),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,f),t.addExtPacker(26,ArrayBuffer,f),t.addExtPacker(29,DataView,f)),i.hasBuffer&&t.addExtPacker(27,o,i.from)};var n,i=t("./bufferish"),o=i.global,f=i.Uint8Array.from,u={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(e){return n||(n=t("./encode").encode),n(e)}function s(t){return t.valueOf()}function c(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function h(t){var e={};for(var r in u)e[r]=t[r];return e}},{"./bufferish":15,"./encode":22}],26:[function(t,e,r){r.setExtUnpackers=function(t){t.addExtUnpacker(14,[u,s(Error)]),t.addExtUnpacker(1,[u,s(EvalError)]),t.addExtUnpacker(2,[u,s(RangeError)]),t.addExtUnpacker(3,[u,s(ReferenceError)]),t.addExtUnpacker(4,[u,s(SyntaxError)]),t.addExtUnpacker(5,[u,s(TypeError)]),t.addExtUnpacker(6,[u,s(URIError)]),t.addExtUnpacker(10,[u,a]),t.addExtUnpacker(11,[u,c(Boolean)]),t.addExtUnpacker(12,[u,c(String)]),t.addExtUnpacker(13,[u,c(Date)]),t.addExtUnpacker(15,[u,c(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,c(Int8Array)),t.addExtUnpacker(18,c(Uint8Array)),t.addExtUnpacker(19,[h,c(Int16Array)]),t.addExtUnpacker(20,[h,c(Uint16Array)]),t.addExtUnpacker(21,[h,c(Int32Array)]),t.addExtUnpacker(22,[h,c(Uint32Array)]),t.addExtUnpacker(23,[h,c(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[h,c(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,c(Uint8ClampedArray)),t.addExtUnpacker(26,h),t.addExtUnpacker(29,[h,c(DataView)])),i.hasBuffer&&t.addExtUnpacker(27,c(o))};var n,i=t("./bufferish"),o=i.global,f={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function u(e){return n||(n=t("./decode").decode),n(e)}function a(t){return RegExp.apply(null,t)}function s(t){return function(e){var r=new t;for(var n in f)r[n]=e[n];return r}}function c(t){return function(e){return new t(e)}}function h(t){return new Uint8Array(t).buffer}},{"./bufferish":15,"./decode":19}],27:[function(t,e,r){t("./read-core"),t("./write-core"),r.createCodec=t("./codec-base").createCodec},{"./codec-base":16,"./read-core":29,"./write-core":32}],28:[function(t,e,r){r.FlexDecoder=o,r.FlexEncoder=f;var n=t("./bufferish"),i="BUFFER_SHORTAGE";function o(){if(!(this instanceof o))return new o}function f(){if(!(this instanceof f))return new f}function u(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function a(t){(this.buffers||(this.buffers=[])).push(t)}function s(t){return function(e){for(var r in t)e[r]=t[r];return e}}o.mixin=s({bufferish:n,write:function(t){var e=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:function(){throw new Error("method not implemented: fetch()")},flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=i)throw t;this.offset=e;break}this.push(t)}},push:a,pull:function(){return(this.buffers||(this.buffers=[])).shift()},read:u,reserve:function(t){var e=this.offset,r=e+t;if(r>this.buffer.length)throw new Error(i);return this.offset=r,e},offset:0}),o.mixin(o.prototype),f.mixin=s({bufferish:n,write:function(){throw new Error("method not implemented: write()")},fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return n.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:a,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:u,reserve:function(t){var e=0|t;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+e;if(i<r)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*r,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var r=this.reserve(e);n.prototype.copy.call(t,this.buffer,r)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),f.mixin(f.prototype)},{"./bufferish":15}],29:[function(t,e,r){var n=t("./ext-buffer").ExtBuffer,i=t("./ext-unpacker"),o=t("./read-format").readUint8,f=t("./read-token"),u=t("./codec-base");function a(){var t=this.options;return this.decode=function(t){var e=f.getReadToken(t);return function(t){var r=o(t),n=e[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(t)}}(t),t&&t.preset&&i.setExtUnpackers(this),this}u.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=u.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new n(e,t)}},init:a}),r.preset=a.call(u.preset)},{"./codec-base":16,"./ext-buffer":24,"./ext-unpacker":26,"./read-format":30,"./read-token":31}],30:[function(t,e,r){var n=t("ieee754"),i=t("int64-buffer"),o=i.Uint64BE,f=i.Int64BE;r.getReadFormat=function(t){var e=u.hasArrayBuffer&&t&&t.binarraybuffer,r=t&&t.int64;return{map:s&&t&&t.usemap?l:h,array:p,str:d,bin:e?v:y,ext:w,uint8:b,uint16:m,uint32:A,uint64:B(8,r?T:U),int8:g,int16:E,int32:x,int64:B(8,r?S:k),float32:B(4,O),float64:B(8,I)}},r.readUint8=b;var u=t("./bufferish"),a=t("./bufferish-proto"),s="undefined"!=typeof Map,c=!0;function h(t,e){var r,n={},i=new Array(e),o=new Array(e),f=t.codec.decode;for(r=0;r<e;r++)i[r]=f(t),o[r]=f(t);for(r=0;r<e;r++)n[i[r]]=o[r];return n}function l(t,e){var r,n=new Map,i=new Array(e),o=new Array(e),f=t.codec.decode;for(r=0;r<e;r++)i[r]=f(t),o[r]=f(t);for(r=0;r<e;r++)n.set(i[r],o[r]);return n}function p(t,e){for(var r=new Array(e),n=t.codec.decode,i=0;i<e;i++)r[i]=n(t);return r}function d(t,e){var r=t.reserve(e),n=r+e;return a.toString.call(t.buffer,"utf-8",r,n)}function y(t,e){var r=t.reserve(e),n=r+e,i=a.slice.call(t.buffer,r,n);return u.from(i)}function v(t,e){var r=t.reserve(e),n=r+e,i=a.slice.call(t.buffer,r,n);return u.Uint8Array.from(i).buffer}function w(t,e){var r=t.reserve(e+1),n=t.buffer[r++],i=r+e,o=t.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(a.slice.call(t.buffer,r,i))}function b(t){var e=t.reserve(1);return t.buffer[e]}function g(t){var e=t.reserve(1),r=t.buffer[e];return 128&r?r-256:r}function m(t){var e=t.reserve(2),r=t.buffer;return r[e++]<<8|r[e]}function E(t){var e=t.reserve(2),r=t.buffer,n=r[e++]<<8|r[e];return 32768&n?n-65536:n}function A(t){var e=t.reserve(4),r=t.buffer;return 16777216*r[e++]+(r[e++]<<16)+(r[e++]<<8)+r[e]}function x(t){var e=t.reserve(4),r=t.buffer;return r[e++]<<24|r[e++]<<16|r[e++]<<8|r[e]}function B(t,e){return function(r){var n=r.reserve(t);return e.call(r.buffer,n,c)}}function U(t){return new o(this,t).toNumber()}function k(t){return new f(this,t).toNumber()}function T(t){return new o(this,t)}function S(t){return new f(this,t)}function O(t){return n.read(this,t,!1,23,4)}function I(t){return n.read(this,t,!1,52,8)}},{"./bufferish":15,"./bufferish-proto":13,ieee754:5,"int64-buffer":6}],31:[function(t,e,r){var n=t("./read-format");function i(t){var e,r=new Array(256);for(e=0;e<=127;e++)r[e]=o(e);for(e=128;e<=143;e++)r[e]=u(e-128,t.map);for(e=144;e<=159;e++)r[e]=u(e-144,t.array);for(e=160;e<=191;e++)r[e]=u(e-160,t.str);for(r[192]=o(null),r[193]=null,r[194]=o(!1),r[195]=o(!0),r[196]=f(t.uint8,t.bin),r[197]=f(t.uint16,t.bin),r[198]=f(t.uint32,t.bin),r[199]=f(t.uint8,t.ext),r[200]=f(t.uint16,t.ext),r[201]=f(t.uint32,t.ext),r[202]=t.float32,r[203]=t.float64,r[204]=t.uint8,r[205]=t.uint16,r[206]=t.uint32,r[207]=t.uint64,r[208]=t.int8,r[209]=t.int16,r[210]=t.int32,r[211]=t.int64,r[212]=u(1,t.ext),r[213]=u(2,t.ext),r[214]=u(4,t.ext),r[215]=u(8,t.ext),r[216]=u(16,t.ext),r[217]=f(t.uint8,t.str),r[218]=f(t.uint16,t.str),r[219]=f(t.uint32,t.str),r[220]=f(t.uint16,t.array),r[221]=f(t.uint32,t.array),r[222]=f(t.uint16,t.map),r[223]=f(t.uint32,t.map),e=224;e<=255;e++)r[e]=o(e-256);return r}function o(t){return function(){return t}}function f(t,e){return function(r){var n=t(r);return e(r,n)}}function u(t,e){return function(r){return e(r,t)}}r.getReadToken=function(t){var e=n.getReadFormat(t);return t&&t.useraw?function(t){var e,r=i(t).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],e=160;e<=191;e++)r[e]=u(e-160,t.bin);return r}(e):i(e)}},{"./read-format":30}],32:[function(t,e,r){var n=t("./ext-buffer").ExtBuffer,i=t("./ext-packer"),o=t("./write-type"),f=t("./codec-base");function u(){var t=this.options;return this.encode=function(t){var e=o.getWriteType(t);return function(t,r){var n=e[typeof r];if(!n)throw new Error('Unsupported type "'+typeof r+'": '+r);n(t,r)}}(t),t&&t.preset&&i.setExtPackers(this),this}f.install({addExtPacker:function(t,e,r){r=f.filter(r);var i=e.name;function o(e){return r&&(e=r(e)),new n(e,t)}i&&"Object"!==i?(this.extPackers||(this.extPackers={}))[i]=o:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,o])},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),r=t.constructor,n=r&&r.name&&e[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,f=0;f<o;f++){var u=i[f];if(r===u[0])return u[1]}},init:u}),r.preset=u.call(f.preset)},{"./codec-base":16,"./ext-buffer":24,"./ext-packer":25,"./write-type":34}],33:[function(t,e,r){var n=t("ieee754"),i=t("int64-buffer"),o=i.Uint64BE,f=i.Int64BE,u=t("./write-uint8").uint8,a=t("./bufferish"),s=a.global,c=a.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s&&!s.TYPED_ARRAY_SUPPORT,h=a.hasBuffer&&s.prototype||{};function l(){var t=u.slice();return t[196]=p(196),t[197]=d(197),t[198]=y(198),t[199]=p(199),t[200]=d(200),t[201]=y(201),t[202]=v(202,4,h.writeFloatBE||g,!0),t[203]=v(203,8,h.writeDoubleBE||m,!0),t[204]=p(204),t[205]=d(205),t[206]=y(206),t[207]=v(207,8,w),t[208]=p(208),t[209]=d(209),t[210]=y(210),t[211]=v(211,8,b),t[217]=p(217),t[218]=d(218),t[219]=y(219),t[220]=d(220),t[221]=y(221),t[222]=d(222),t[223]=y(223),t}function p(t){return function(e,r){var n=e.reserve(2),i=e.buffer;i[n++]=t,i[n]=r}}function d(t){return function(e,r){var n=e.reserve(3),i=e.buffer;i[n++]=t,i[n++]=r>>>8,i[n]=r}}function y(t){return function(e,r){var n=e.reserve(5),i=e.buffer;i[n++]=t,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function v(t,e,r,n){return function(i,o){var f=i.reserve(e+1);i.buffer[f++]=t,r.call(i.buffer,o,f,n)}}function w(t,e){new o(this,e,t)}function b(t,e){new f(this,e,t)}function g(t,e){n.write(this,t,e,!1,23,4)}function m(t,e){n.write(this,t,e,!1,52,8)}r.getWriteToken=function(t){return t&&t.uint8array?function(){var t=l();return t[202]=v(202,4,g),t[203]=v(203,8,m),t}():c||a.hasBuffer&&t&&t.safe?function(){var t=u.slice();return t[196]=v(196,1,s.prototype.writeUInt8),t[197]=v(197,2,s.prototype.writeUInt16BE),t[198]=v(198,4,s.prototype.writeUInt32BE),t[199]=v(199,1,s.prototype.writeUInt8),t[200]=v(200,2,s.prototype.writeUInt16BE),t[201]=v(201,4,s.prototype.writeUInt32BE),t[202]=v(202,4,s.prototype.writeFloatBE),t[203]=v(203,8,s.prototype.writeDoubleBE),t[204]=v(204,1,s.prototype.writeUInt8),t[205]=v(205,2,s.prototype.writeUInt16BE),t[206]=v(206,4,s.prototype.writeUInt32BE),t[207]=v(207,8,w),t[208]=v(208,1,s.prototype.writeInt8),t[209]=v(209,2,s.prototype.writeInt16BE),t[210]=v(210,4,s.prototype.writeInt32BE),t[211]=v(211,8,b),t[217]=v(217,1,s.prototype.writeUInt8),t[218]=v(218,2,s.prototype.writeUInt16BE),t[219]=v(219,4,s.prototype.writeUInt32BE),t[220]=v(220,2,s.prototype.writeUInt16BE),t[221]=v(221,4,s.prototype.writeUInt32BE),t[222]=v(222,2,s.prototype.writeUInt16BE),t[223]=v(223,4,s.prototype.writeUInt32BE),t}():l()}},{"./bufferish":15,"./write-uint8":35,ieee754:5,"int64-buffer":6}],34:[function(t,e,r){var n=t("isarray"),i=t("int64-buffer"),o=i.Uint64BE,f=i.Int64BE,u=t("./bufferish"),a=t("./bufferish-proto"),s=t("./write-token"),c=t("./write-uint8").uint8,h=t("./ext-buffer").ExtBuffer,l="undefined"!=typeof Uint8Array,p="undefined"!=typeof Map,d=[];d[1]=212,d[2]=213,d[4]=214,d[8]=215,d[16]=216,r.getWriteType=function(t){var e=s.getWriteToken(t),r=t&&t.useraw,i=l&&t&&t.binarraybuffer,y=i?u.isArrayBuffer:u.isBuffer,v=i?function(t,e){m(t,new Uint8Array(e))}:m,w=p&&t&&t.usemap?function(t,r){if(!(r instanceof Map))return E(t,r);var n=r.size;e[n<16?128+n:n<=65535?222:223](t,n);var i=t.codec.encode;r.forEach(function(e,r,n){i(t,r),i(t,e)})}:E;return{boolean:function(t,r){e[r?195:194](t,r)},function:g,number:function(t,r){var n=0|r;r===n?e[-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210](t,n):e[203](t,r)},object:r?function(t,r){if(y(r))return function(t,r){var n=r.length;e[n<32?160+n:n<=65535?218:219](t,n),t.send(r)}(t,r);b(t,r)}:b,string:function(t){return function(r,n){var i=n.length,o=5+3*i;r.offset=r.reserve(o);var f=r.buffer,u=t(i),s=r.offset+u;i=a.write.call(f,n,s);var c=t(i);if(u!==c){var h=s+c-u,l=s+i;a.copy.call(f,f,h,s,l)}e[1===c?160+i:c<=3?215+c:219](r,i),r.offset+=i}}(r?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5}),symbol:g,undefined:g};function b(t,r){if(null===r)return g(t,r);if(y(r))return v(t,r);if(n(r))return function(t,r){var n=r.length;e[n<16?144+n:n<=65535?220:221](t,n);for(var i=t.codec.encode,o=0;o<n;o++)i(t,r[o])}(t,r);if(o.isUint64BE(r))return function(t,r){e[207](t,r.toArray())}(t,r);if(f.isInt64BE(r))return function(t,r){e[211](t,r.toArray())}(t,r);var i=t.codec.getExtPacker(r);if(i&&(r=i(r)),r instanceof h)return function(t,r){var n=r.buffer,i=n.length,o=d[i]||(i<255?199:i<=65535?200:201);e[o](t,i),c[r.type](t),t.send(n)}(t,r);w(t,r)}function g(t,r){e[192](t,r)}function m(t,r){var n=r.length;e[n<255?196:n<=65535?197:198](t,n),t.send(r)}function E(t,r){var n=Object.keys(r),i=n.length;e[i<16?128+i:i<=65535?222:223](t,i);var o=t.codec.encode;n.forEach(function(e){o(t,e),o(t,r[e])})}}},{"./bufferish":15,"./bufferish-proto":13,"./ext-buffer":24,"./write-token":33,"./write-uint8":35,"int64-buffer":6,isarray:7}],35:[function(t,e,r){for(var n=r.uint8=new Array(256),i=0;i<=255;i++)n[i]=o(i);function o(t){return function(e){var r=e.reserve(1);e.buffer[r]=t}}},{}],36:[function(t,e,r){var n,i,o=e.exports={};function f(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===f||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:f}catch(t){n=f}try{i="function"==typeof clearTimeout?clearTimeout:u}catch(t){i=u}}();var s,c=[],h=!1,l=-1;function p(){h&&s&&(h=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=a(p);h=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new y(t,e)),1!==c.length||h||a(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],37:[function(t,e,r){(function(r){"use strict";var n=o(t("cbor-js")),i=o(t("msgpack-lite"));function o(t){return t&&t.__esModule?t:{default:t}}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u={cbor:{encode:function(t){try{t=n.default.encode(t)}catch(t){throw new Error("failed to encode CBOR format")}return!ArrayBuffer.isView(t)&&r.browser&&(t=new Uint8Array(t)),t},decode:function(t){ArrayBuffer.isView(t)&&r.browser&&(t=t.buffer);try{t=n.default.decode(t)}catch(t){throw new Error("failed to decode CBOR format")}return t}},msgpack:{encode:function(t){try{t=i.default.encode(t)}catch(t){throw new Error("failed to encode MsgPack format")}return t},decode:function(t){try{t=i.default.decode(t)}catch(t){throw new Error("failed to decode MsgPack format")}return t}},json:{encode:function(t){try{t=JSON.stringify(t)}catch(t){throw new Error("failed to encode JSON format")}return t},decode:function(t){try{t=JSON.parse(t)}catch(t){throw new Error("failed to decode JSON format")}return t}}},a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cbor";if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===u[e])throw new Error("invalid coded");this.type=e}return function(t,e,r){e&&f(t.prototype,e)}(t,[{key:"encode",value:function(t){return u[this.type].encode(t)}},{key:"decode",value:function(t){return u[this.type].decode(t)}}]),t}();e.exports=a}).call(this,t("_process"))},{_process:36,"cbor-js":3,"msgpack-lite":8}]},{},[37])(37)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function f(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function u(t,e,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var u=new f(r,n||t,o),a=i?i+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],u]:t._events[a].push(u):(t._events[a]=u,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,f=new Array(o);n<o;n++)f[n]=r[n].fn;return f},s.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,n,o,f){var u=i?i+t:t;if(!this._events[u])return!1;var a,s,c=this._events[u],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,o),!0;case 6:return c.fn.call(c.context,e,r,n,o,f),!0}for(s=1,a=new Array(h-1);s<h;s++)a[s-1]=arguments[s];c.fn.apply(c.context,a)}else{var l,p=c.length;for(s=0;s<p;s++)switch(c[s].once&&this.removeListener(t,c[s].fn,void 0,!0),h){case 1:c[s].fn.call(c[s].context);break;case 2:c[s].fn.call(c[s].context,e);break;case 3:c[s].fn.call(c[s].context,e,r);break;case 4:c[s].fn.call(c[s].context,e,r,n);break;default:if(!a)for(l=1,a=new Array(h-1);l<h;l++)a[l-1]=arguments[l];c[s].fn.apply(c[s].context,a)}}return!0},s.prototype.on=function(t,e,r){return u(this,t,e,r,!1)},s.prototype.once=function(t,e,r){return u(this,t,e,r,!0)},s.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var f=this._events[o];if(f.fn)f.fn!==e||n&&!f.once||r&&f.context!==r||a(this,o);else{for(var u=0,s=[],c=f.length;u<c;u++)(f[u].fn!==e||n&&!f[u].once||r&&f[u].context!==r)&&s.push(f[u]);s.length?this._events[o]=1===s.length?s[0]:s:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=i,s.EventEmitter=s,void 0!==e&&(e.exports=s)},{}],3:[function(t,e,r){var n,i,o=e.exports={};function f(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===f||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:f}catch(t){n=f}try{i="function"==typeof clearTimeout?clearTimeout:u}catch(t){i=u}}();var s,c=[],h=!1,l=-1;function p(){h&&s&&(h=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=a(p);h=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new y(t,e)),1!==c.length||h||a(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],4:[function(t,e,r){(function(r){"use strict";var n=o(t("eventemitter3")),i=o(t("encodr"));function o(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t}var p=function(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object.defineProperty(t,e,{configurable:!1,enumerable:!1,writable:n,value:r})},d=function(){function t(e){c(this,t),p(this,"channel",e),this.reset()}return l(t,[{key:"reset",value:function(){this.fid=0,this.rid=0,this.type="MESSAGE",this.data=null}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.fid=t.fid?t.fid:this.channel.fid(),this.rid=t.rid?t.rid:e?e.fid:0,this.type=t.type?t.type:"MESSAGE",this.data=t.data?t.data:null,this}},{key:"import",value:function(t){var e=this.channel.codec.decode(t);return this.fid=e[0],this.rid=e[1],this.type=e[2],this.data=e[3],this}},{key:"export",value:function(){var t=[this.fid,this.rid,this.type,this.data];return this.channel.codec.encode(t)}}]),t}(),y=function(t){function e(t){var n,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";return c(this,e),n=function(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?a(t):e}(this,u(e).call(this)),p(a(n),"ws",t),p(a(n),"codec",new i.default(s)),p(a(n),"fid",(o=0,function(){return++o>=4294967294&&(o=1),o})),n.ws.addEventListener("message",function(t){var e=new d(a(n));try{var i=t.data;"string"!=typeof i&&!ArrayBuffer.isView(i)&&r.browser&&(i=new Uint8Array(i)),e.import(i)}catch(t){return void n.emit("error",t)}t.frame=e,n.emit("message",t)}),n}return s(e,n.default),l(e,[{key:"send",value:function(t,e){var n=new d(this);n.set(t,e);var i=n.export();return"string"!=typeof i&&ArrayBuffer.isView(i)&&r.browser&&(i=i.buffer),this.ws.send(i),{frame:n,data:i}}}]),e}();e.exports=y}).call(this,t("_process"))},{_process:3,encodr:1,eventemitter3:2}]},{},[4])(4)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],15:[function(_dereq_,module,exports){
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,_dereq_("zen-observable")):"function"==typeof define&&define.amd?define(["exports","zen-observable"],o):o((e.apolloLink=e.apolloLink||{},e.apolloLink.zenObservable={}),e.Observable)}(this,function(e,o){"use strict";var n=o=o&&o.hasOwnProperty("default")?o.default:o;e.default=n,e.Observable=n,Object.defineProperty(e,"__esModule",{value:!0})});
},{"zen-observable":16}],16:[function(_dereq_,module,exports){
module.exports=_dereq_("./lib/Observable.js").Observable;
},{"./lib/Observable.js":17}],17:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var hasSymbols=function(){return"function"==typeof Symbol},hasSymbol=function(e){return hasSymbols()&&Boolean(Symbol[e])},getSymbol=function(e){return hasSymbol(e)?Symbol[e]:"@@"+e};function getMethod(e,t){var r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function getSpecies(e){var t=e.constructor;return void 0!==t&&null===(t=t[getSymbol("species")])&&(t=void 0),void 0!==t?t:Observable}function isObservable(e){return e instanceof Observable}function hostReportError(e){hostReportError.log?hostReportError.log(e):setTimeout(function(){throw e})}function enqueue(e){Promise.resolve().then(function(){try{e()}catch(e){hostReportError(e)}})}function cleanupSubscription(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var r=getMethod(t,"unsubscribe");r&&r.call(t)}}catch(e){hostReportError(e)}}function closeSubscription(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function flushSubscription(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var r=0;r<t.length&&(notifySubscription(e,t[r].type,t[r].value),"closed"!==e._state);++r);}}function notifySubscription(e,t,r){e._state="running";var n=e._observer;try{var o=getMethod(n,t);switch(t){case"next":o&&o.call(n,r);break;case"error":if(closeSubscription(e),!o)throw r;o.call(n,r);break;case"complete":closeSubscription(e),o&&o.call(n)}}catch(e){hostReportError(e)}"closed"===e._state?cleanupSubscription(e):"running"===e._state&&(e._state="ready")}function onNotify(e,t,r){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:r}],void enqueue(function(){return flushSubscription(e)})):void notifySubscription(e,t,r);e._queue.push({type:t,value:r})}}hasSymbols()&&!hasSymbol("observable")&&(Symbol.observable=Symbol("observable"));var Subscription=function(){function e(t,r){_classCallCheck(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var n=new SubscriptionObserver(this);try{this._cleanup=r.call(void 0,n)}catch(e){n.error(e)}"initializing"===this._state&&(this._state="ready")}return _createClass(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(closeSubscription(this),cleanupSubscription(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),SubscriptionObserver=function(){function e(t){_classCallCheck(this,e),this._subscription=t}return _createClass(e,[{key:"next",value:function(e){onNotify(this._subscription,"next",e)}},{key:"error",value:function(e){onNotify(this._subscription,"error",e)}},{key:"complete",value:function(){onNotify(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),Observable=exports.Observable=function(){function e(t){if(_classCallCheck(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return _createClass(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new Subscription(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise(function(r,n){if("function"==typeof e)var o=t.subscribe({next:function(t){try{e(t,i)}catch(e){n(e),o.unsubscribe()}},error:n,complete:r});else n(new TypeError(e+" is not a function"));function i(){o.unsubscribe(),r()}})}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(getSpecies(this))(function(r){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})})}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(getSpecies(this))(function(r){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})})}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=getSpecies(this),n=arguments.length>1,o=!1,i=arguments[1];return new r(function(r){return t.subscribe({next:function(t){var u=!o;if(o=!0,!u||n)try{i=e(i,t)}catch(e){return r.error(e)}else i=t},error:function(e){r.error(e)},complete:function(){if(!o&&!n)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(i),r.complete()}})})}},{key:"concat",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=getSpecies(this);return new o(function(t){var n=void 0;return function e(i){n=i.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){0===r.length?(n=void 0,t.complete()):e(o.from(r.shift()))}})}(e),function(){n&&(n.unsubscribe(),n=void 0)}})}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=getSpecies(this);return new r(function(n){var o=[],i=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return n.error(e)}var i=r.from(t).subscribe({next:function(e){n.next(e)},error:function(e){n.error(e)},complete:function(){var e=o.indexOf(i);e>=0&&o.splice(e,1),u()}});o.push(i)},error:function(e){n.error(e)},complete:function(){u()}});function u(){i.closed&&0===o.length&&n.complete()}return function(){o.forEach(function(e){return e.unsubscribe()}),i.unsubscribe()}})}},{key:getSymbol("observable"),value:function(){return this}}],[{key:"from",value:function(t){var r="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var n=getMethod(t,getSymbol("observable"));if(n){var o=n.call(t);if(Object(o)!==o)throw new TypeError(o+" is not an object");return isObservable(o)&&o.constructor===r?o:new r(function(e){return o.subscribe(e)})}if(hasSymbol("iterator")&&(n=getMethod(t,getSymbol("iterator"))))return new r(function(e){enqueue(function(){if(!e.closed){var r=!0,o=!1,i=void 0;try{for(var u,c=n.call(t)[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var s=u.value;if(e.next(s),e.closed)return}}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}e.complete()}})});if(Array.isArray(t))return new r(function(e){enqueue(function(){if(!e.closed){for(var r=0;r<t.length;++r)if(e.next(t[r]),e.closed)return;e.complete()}})});throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new("function"==typeof this?this:e)(function(e){enqueue(function(){if(!e.closed){for(var t=0;t<r.length;++t)if(e.next(r[t]),e.closed)return;e.complete()}})})}},{key:getSymbol("species"),get:function(){return this}}]),e}();hasSymbols()&&Object.defineProperty(Observable,Symbol("extensions"),{value:{symbol:getSymbol("observable"),hostReportError:hostReportError},configurabe:!0});
},{}],18:[function(_dereq_,module,exports){
(function (global){
"use strict";var _apolloLink=_dereq_("apollo-link"),_ws=_interopRequireDefault("undefined"!=typeof window?window.WebSocket:"undefined"!=typeof global?global.WebSocket:null),_websocketFramed=_interopRequireDefault(_dereq_("websocket-framed")),_printer=_dereq_("graphql/language/printer"),_graphqlQueryCompress=_interopRequireDefault(_dereq_("graphql-query-compress")),_latching=_interopRequireDefault(_dereq_("latching")),_eventemitter=_interopRequireDefault(_dereq_("eventemitter3")),_ducky=_interopRequireDefault(_dereq_("ducky"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ApolloClientWS=function(e){function t(){var e;if(_classCallCheck(this,t),e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)),2===arguments.length&&"string"==typeof(arguments.length<=0?void 0:arguments[0])&&"object"===_typeof(arguments.length<=1?void 0:arguments[1]))e._args={uri:arguments.length<=0?void 0:arguments[0],opts:arguments.length<=1?void 0:arguments[1]};else{if(1!==arguments.length||"object"!==_typeof(arguments.length<=0?void 0:arguments[0]))throw new Error("invalid arguments to ApolloClientWS constructor (invalid number or type of arguments)");e._args=arguments.length<=0?void 0:arguments[0]}if(void 0===e._args.uri)throw new Error("invalid arguments to ApolloClientWS constructor (missing URI)");e._args.opts=Object.assign({debug:0,protocols:[],compress:!1,encoding:"json",keepalive:0,reconnectattempts:-1,reconnectdelay:2e3},e._args.opts);var n=[];if(!_ducky.default.validate(e._args.opts,"{\n            debug:             number,\n            protocols:         [ string* ],\n            compress:          boolean,\n            encoding:          string,\n            keepalive:         number,\n            reconnectattempts: number,\n            reconnectdelay:    number\n        }",n))throw new Error("invalid options: ".concat(n.join("; ")));return e._ws=null,e._wsf=null,e._to=null,e._tx={},e._latching=new _latching.default,e._emitter=new _eventemitter.default,e}return _inherits(t,_apolloLink.ApolloLink),_createClass(t,[{key:"hook",value:function(){var e;return(e=this._latching).hook.apply(e,arguments)}},{key:"at",value:function(){var e;return(e=this._latching).at.apply(e,arguments)}},{key:"latch",value:function(){var e;return(e=this._latching).latch.apply(e,arguments)}},{key:"unlatch",value:function(){var e;return(e=this._latching).unlatch.apply(e,arguments)}},{key:"emit",value:function(){var e;return(e=this._emitter).emit.apply(e,arguments)}},{key:"once",value:function(){var e;return(e=this._emitter).once.apply(e,arguments)}},{key:"on",value:function(){var e;return(e=this._emitter).on.apply(e,arguments)}},{key:"off",value:function(){var e;return(e=this._emitter).off.apply(e,arguments)}},{key:"addListener",value:function(){var e;return(e=this._emitter).addListener.apply(e,arguments)}},{key:"removeListener",value:function(){var e;return(e=this._emitter).removeListener.apply(e,arguments)}},{key:"removeAllListeners",value:function(){var e;return(e=this._emitter).removeAllListeners.apply(e,arguments)}},{key:"listenerCount",value:function(){var e;return(e=this._emitter).listenerCount.apply(e,arguments)}},{key:"listeners",value:function(){var e;return(e=this._emitter).listeners.apply(e,arguments)}},{key:"eventNames",value:function(){var e;return(e=this._emitter).eventNames.apply(e,arguments)}},{key:"log",value:function(e,t){if(e<=this._args.opts.debug){var n=(new Date).toISOString(),r="".concat(n," DEBUG [").concat(e,"]: ").concat(t);this.emit("debug",{date:n,level:e,msg:t,log:r})}}},{key:"connect",value:function(){var e=this;return this._connectPromise?Promise.resolve(this._connectPromise):this._connectPromise=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(r,o){var i;e.emit("connect"),e.log(1,"connect: begin"),(i=new _ws.default(e._args.uri,e._args.opts.protocols)).binaryType="arraybuffer";var s=new _websocketFramed.default(i,e._args.opts.encoding),c=function s(c){null!==e._ws&&e._ws._explicitDisconnect||(e.log(1,"connect: end (connection error: ".concat(c.message,")")),i.removeEventListener("error",s),i._errorOnConnect=!0,n<e._args.opts.reconnectattempts||-1===e._args.opts.reconnectattempts?(e.log(2,"connection error: trigger new connect attempt "+"(in ".concat(Math.trunc(e._args.opts.reconnectdelay/1e3),"s)")),setTimeout(function(){t(n+1).then(function(){return r()}).catch(function(e){return o(e)})},e._args.opts.reconnectdelay)):o(c))};i.addEventListener("error",c);var a=function t(){e.log(1,"connect: end (connection open)"),i.removeEventListener("open",t),e._ws=i,e._wsf=s,e._args.opts.keepalive>0&&(e.log(2,"connect: start auto-disconnect timer"),e._to=setTimeout(function(){e.disconnect()},e._args.opts.keepalive)),e.emit("open"),r()};i.addEventListener("open",a);var l=function(t){var n=(t=e.hook("receive:message","pass",t)).frame,r=n.rid,o=n.type,i=n.data;"GRAPHQL-RESPONSE"===o&&"object"===_typeof(i)?(e.log(3,"query: response (framed): ".concat(JSON.stringify(t.frame))),void 0!==e._tx[r]&&(_ducky.default.validate(i,"({ data: Object, errors?: [ Object* ] } | { data?: Object, errors: [ Object* ] })")?e._tx[r](i):e._tx[r](null,"invalid GraphQL response object"))):(e.log(2,"message received: ".concat(JSON.stringify(t.frame))),e.emit("receive",t.frame))};s.on("message",l),s.on("error",function(t){e.log(2,"WebSocket error: ".concat(t))}),i.addEventListener("close",function t(n){if(null===e._ws||!e._ws._explicitDisconnect){e.log(1,"connection closed (code: ".concat(n.code,")")),i.removeEventListener("error",c),i.removeEventListener("open",a),i.removeEventListener("message",l),i.removeEventListener("close",t),null!==e._to&&clearTimeout(e._to),e._to=null,e._ws=null,e._wsf=null;var r=i._errorOnConnect;delete i._errorOnConnect,e.emit("close"),!r&&(n.code>1e3||0===e._args.opts.keepalive)&&(e.log(2,"connection closed: trigger re-connect "+"(in ".concat(e._args.opts.reconnectdelay/1e3,"s)")),setTimeout(function(){e.connect().catch(function(e){})},e._args.opts.reconnectdelay))}})})}(0).then(function(){delete e._connectPromise},function(t){throw delete e._connectPromise,t})}},{key:"disconnect",value:function(){var e=this;return this._disconnectPromise?Promise.resolve(this._disconnectPromise):this._disconnectPromise=new Promise(function(t,n){if(e.emit("disconnect"),e.log(1,"disconnect: begin"),null!==e._ws){e._ws._explicitDisconnect=!0;e._ws.addEventListener("close",function n(r){null!==e._ws&&(e._ws.removeEventListener("close",n),null!==e._to&&(clearTimeout(e._to),e._to=null),e._ws=null,e._wsf=null,e.log(1,"disconnect: end"),e.emit("close"),t())}),e._ws.close()}else e.log(1,"disconnect: end (no-op)"),t()}).then(function(){delete e._disconnectPromise},function(){delete e._disconnectPromise})}},{key:"send",value:function(e,t){var n=this;return this.log(1,"send: begin"),this.emit("send",{type:e,data:t}),new Promise(function(e,t){null===n._ws?(n.log(2,"send: on-the-fly connect"),n.connect().then(function(){return e()}).catch(function(e){return t(e)})):e()}).then(function(){return new Promise(function(e,t){!function r(o){o<=0?t(new Error("failed to await WebSocket ready-state OPEN")):n._ws.readyState===_ws.default.CLOSED?t(new Error("failed to send to WebSocket, already in ready-state CLOSED")):n._ws.readyState===_ws.default.CLOSING?t(new Error("failed to send to WebSocket, already in ready-state CLOSING")):n._ws.readyState===_ws.default.CONNECTING?setTimeout(function(){return r(o-1)},100):e()}(100)})}).then(function(){var r=n._wsf.send({type:e,data:t}).frame;return n.log(2,"message sent: ".concat(JSON.stringify(r))),n.log(1,"send: end"),r})}},{key:"request",value:function(e){var t=this;return new _apolloLink.Observable(function(n){return t.emit("request",e),t.log(1,"request: begin"),new Promise(function(e,n){null===t._ws?(t.log(2,"request: on-the-fly connect"),t.connect().then(function(){return e()}).catch(function(e){return n(e)})):e()}).then(function(){return new Promise(function(e,n){!function r(o){o<=0?n(new Error("failed to await WebSocket ready-state OPEN")):t._ws.readyState===_ws.default.CLOSED?n(new Error("failed to send to WebSocket, already in ready-state CLOSED")):t._ws.readyState===_ws.default.CLOSING?n(new Error("failed to send to WebSocket, already in ready-state CLOSING")):t._ws.readyState===_ws.default.CONNECTING?setTimeout(function(){return r(o-1)},100):e()}(100)})}).then(function(){return new Promise(function(n,r){var o=Object.assign({},e);o.query=(0,_printer.print)(o.query),!0===t._args.opts.compress&&(o.query=(0,_graphqlQueryCompress.default)(o.query)),null===o.operationName&&delete o.operationName,0===Object.keys(o.variables).length&&delete o.variables,0===Object.keys(o.extensions).length&&delete o.extensions,o=t.hook("query:request","pass",o),t.log(2,"request: request: ".concat(JSON.stringify(o)));var i=t._wsf.send({type:"GRAPHQL-REQUEST",data:o}).frame;t.log(3,"request: request (framed): ".concat(JSON.stringify(i)));var s=i.fid;t._tx[s]=function(e,o){delete t._tx[s],e?n(e):r(o)}})}).then(function(e){return t._args.opts.keepalive>0&&(t.log(2,"request: (re)start auto-disconnect timer"),null!==t._to&&clearTimeout(t._to),t._to=setTimeout(function(){t.disconnect()},t._args.opts.keepalive)),t.log(2,"request: response: ".concat(JSON.stringify(e))),t.log(1,"request: end"),e}).then(function(t){e.setContext({response:t}),n.next(t),n.complete()}).catch(function(e){n.error(e)}),function(){}})}}]),t}();module.exports={ApolloClientWS:ApolloClientWS};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"apollo-link":1,"ducky":3,"eventemitter3":4,"graphql-query-compress":6,"graphql/language/printer":10,"latching":12,"websocket-framed":14}]},{},[18])(18)
});
